{"title":"ARGOS MSK & SQS","description":null,"widgets":[{"id":5577013580908318,"definition":{"title":"MSK Consumer Lag","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.msk.kafka.consumer.group.ConsumerLagMetrics.Value{groupid:isc-*} by {groupid}"}],"response_format":"timeseries","style":{"palette":"dog_classic"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":7,"height":4}},{"id":5840025188807210,"definition":{"title":"MSK Consumer Lag (15분 평균값 Top 5)","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.msk.kafka.consumer.group.ConsumerLagMetrics.Value{groupid:isc*} by {groupid}","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":5,"order":"desc"}}]}]},"layout":{"x":7,"y":0,"width":4,"height":2}},{"id":4719143457222492,"definition":{"type":"note","content":"* 통합G/W에서 Producing해주는 RAW 데이터 누적 값이며 관제 CL Pod가 동작할 경우, AWS SQS로 수집해가면서 누적된 수치를 해소함\n* 수치가 0이거나 적을 수록 지연없이 실시간으로 신호를 처리한다고 볼 수 있음\n* 수치가 높더라도 꾸준히 줄어들면 문제 없음(단, 지연 처리됨)\n* 평균 수치가 적정 수준으로 유지될 경우, CL Pod 수 증설을 고려할 필요 있음\n#### 좌측 차트 범례에서 \"Value\" 컬럼으로 내림차순 정렬하면 실시간 Top 수치 조회 가능","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":7,"y":2,"width":4,"height":2}},{"id":7462516544018541,"definition":{"title":"AWS SQS가 수집한 MSK 데이터양","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.sqs.number_of_messages_received{queuename:sdq-*} by {queuename}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":7,"height":4}},{"id":2271220856411307,"definition":{"title":"AWS SQS가 수집한 MSK 데이터양 (15분 평균값 Top 5)","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.sqs.number_of_messages_received{queuename:sdq-*} by {queuename}","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":5,"order":"desc"}}]}]},"layout":{"x":7,"y":4,"width":4,"height":2}},{"id":1006643418106938,"definition":{"type":"note","content":"* 관제 CL Pod가 MSK에서 수집하는 데이터 양\n#### 좌측 차트 범례에서 \"Value\" 컬럼으로 내림차순 정렬하면 실시간 Top 수치 조회 가능","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":7,"y":6,"width":4,"height":2}},{"id":1521751940748098,"definition":{"title":"AWS SQS가 수집한 MSK 데이터 처리량","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.sqs.approximate_number_of_messages_not_visible{queuename:*} by {queuename}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":8,"width":7,"height":4}},{"id":5790301310737628,"definition":{"title":"AWS SQS가 수집한 MSK 데이터 처리량 (15분 평균값 Top 5)","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.sqs.approximate_number_of_messages_not_visible{queuename:*} by {queuename}","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":5,"order":"desc"}}]}]},"layout":{"x":7,"y":8,"width":4,"height":2}},{"id":1329946652109980,"definition":{"type":"note","content":"* 관제 DP Pod가 가져가서 처리하는 데이터 양\n#### 좌측 차트 범례에서 \"Value\" 컬럼으로 내림차순 정렬하면 실시간 Top 수치 조회 가능","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":7,"y":10,"width":4,"height":2}},{"id":4589426197033706,"definition":{"title":"AWS sdq에 누적된 데이터 미처리량","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.sqs.approximate_number_of_messages_visible{queuename:sdq-*} by {queuename}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":12,"width":7,"height":4}},{"id":748382550321428,"definition":{"title":"AWS sdq에 누적된 데이터 미처리량 (15분 평균값 Top 5)","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.sqs.approximate_number_of_messages_visible{queuename:sdq-*} by {queuename}","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":5,"order":"desc"}}]}]},"layout":{"x":7,"y":12,"width":4,"height":2}},{"id":8058189571474428,"definition":{"type":"note","content":"* 관제 DP Pod가 중지되거나 부족할 때 발생하며 금방 해소되면 무방함\n* 필요 시 관련 업무를 서비스 하는 DP Pod 수 증설로 빠르게 해소 가능\n#### 좌측 차트 범례에서 \"Value\" 컬럼으로 내림차순 정렬하면 실시간 Top 수치 조회 가능","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":7,"y":14,"width":4,"height":2}},{"id":5067829100452667,"definition":{"title":"AWS dlq에 누적된 데이터 미처리량","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.sqs.approximate_number_of_messages_visible{queuename:dlq-*} by {queuename}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":16,"width":7,"height":4}},{"id":7731110079687971,"definition":{"title":"AWS dlq에 누적된 데이터 미처리량 (15분 평균 Top 5)","title_size":"16","title_align":"left","time":{"live_span":"15m"},"type":"toplist","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.sqs.approximate_number_of_messages_visible{queuename:dlq-*} by {queuename}","aggregator":"avg"}],"formulas":[{"formula":"query1","limit":{"count":5,"order":"desc"}}]}]},"layout":{"x":7,"y":16,"width":4,"height":2}},{"id":8032936931971776,"definition":{"type":"note","content":"* 관제 DP Pod 및 관련 업무를 서비스 하는 Pod에서 처리 불가능한 상황 발생시 dlq로 이관되며, 주기적으로 재처리를 수행함\n#### 좌측 차트 범례에서 \"Value\" 컬럼으로 내림차순 정렬하면 실시간 Top 수치 조회 가능","background_color":"white","font_size":"14","text_align":"left","vertical_align":"top","show_tick":false,"tick_pos":"50%","tick_edge":"left","has_padding":true},"layout":{"x":7,"y":18,"width":4,"height":2}}],"template_variables":[],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}