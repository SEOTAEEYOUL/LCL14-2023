{"title":"[SKCC] Argos TF","description":null,"widgets":[{"id":6696515941524746,"definition":{"title":"이벤트 발생 내역","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6524116964809560,"definition":{"title":"전체 모니터","type":"manage_status","display_format":"counts","color_preference":"text","hide_zero_counts":true,"query":"","sort":"status,asc","count":50,"start":0,"summary_type":"monitors","show_priority":false,"show_last_triggered":true},"layout":{"x":0,"y":0,"width":12,"height":2}},{"id":5306693952916242,"definition":{"title":"SKCC  입력 Alert","type":"manage_status","display_format":"countsAndList","color_preference":"background","hide_zero_counts":true,"query":"team:skcc","sort":"triggered,desc","count":50,"start":0,"summary_type":"monitors","show_priority":true,"show_last_triggered":true},"layout":{"x":0,"y":2,"width":6,"height":5}},{"id":7596210312094932,"definition":{"title":"Service RED 팀 입력 Alert","type":"manage_status","display_format":"countsAndList","color_preference":"background","hide_zero_counts":true,"query":"team:service-red-team","sort":"triggered,desc","count":50,"start":0,"summary_type":"monitors","show_priority":true,"show_last_triggered":true},"layout":{"x":6,"y":2,"width":6,"height":5}},{"id":1088227204665242,"definition":{"title":"지난 주에 15회 이상 트리거된 모니터","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"alert","conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"formula":"query1","limit":{"count":10,"order":"desc"}}],"queries":[{"data_source":"events","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@evt.name","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert status:error"}}]}]},"layout":{"x":0,"y":7,"width":6,"height":4}},{"id":3803204842344750,"definition":{"title":"5일 이상 음소거된 모니터","type":"manage_status","display_format":"countsAndList","color_preference":"text","hide_zero_counts":true,"query":"muted_elapsed:5d","sort":"name,asc","count":50,"start":0,"summary_type":"monitors","show_priority":false,"show_last_triggered":false},"layout":{"x":6,"y":7,"width":6,"height":4}},{"id":1277079388542900,"definition":{"title":"Priority 별 지난 1달간 트리거된 Alarm 개수 합","title_size":"16","title_align":"left","time":{},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"alias":"P1","formula":"query1","limit":{"count":10,"order":"desc"}},{"alias":"P2","conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"formula":"query2"},{"alias":"P3","conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"formula":"query3"},{"alias":"P4","conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"formula":"query4"},{"alias":"P5","conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"formula":"query5"}],"queries":[{"data_source":"events","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert @evt.name:*\\[P1\\]* team:skcc -@evt.name:\"\\\\[TEST\\\\]*\""}},{"data_source":"events","name":"query2","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert @evt.name:*\\[P2\\]* team:skcc -@evt.name:\"\\\\[TEST\\\\]*\""}},{"data_source":"events","name":"query3","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert @evt.name:*\\[P3\\]* team:skcc -@evt.name:\"\\\\[TEST\\\\]*\""}},{"data_source":"events","name":"query4","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert @evt.name:*\\[P4\\]* team:skcc -@evt.name:\"\\\\[TEST\\\\]*\""}},{"data_source":"events","name":"query5","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert @evt.name:*\\[P5\\]* team:skcc -@evt.name:\"\\\\[TEST\\\\]*\""}}]}]},"layout":{"x":0,"y":11,"width":6,"height":2}},{"id":7869026481826474,"definition":{"title":"Tower 별 지난 1달간 트리거된 Alarm 개수 합","title_size":"16","title_align":"left","time":{},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"alias":"Network","formula":"query1","limit":{"count":10,"order":"desc"}},{"conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"alias":"System","formula":"query2"},{"alias":"Container","conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"formula":"query3"},{"alias":"DB","conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"formula":"query4"},{"alias":"CSP","conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"formula":"query5"}],"queries":[{"data_source":"events","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert @evt.name:*\\[Network\\]* team:skcc -@evt.name:\"\\\\[TEST\\\\]*\""}},{"data_source":"events","name":"query2","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert @evt.name:*\\[System\\]* team:skcc -@evt.name:\"\\\\[TEST\\\\]*\""}},{"data_source":"events","name":"query3","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert @evt.name:*\\[Container\\]* team:skcc -@evt.name:\"\\\\[TEST\\\\]*\""}},{"data_source":"events","name":"query4","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert @evt.name:*\\[DB\\]* team:skcc -@evt.name:\"\\\\[TEST\\\\]*\""}},{"data_source":"events","name":"query5","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert @evt.name:*\\[CSP\\]* team:skcc -@evt.name:\"\\\\[TEST\\\\]*\""}}]}]},"layout":{"x":6,"y":11,"width":6,"height":2}}]},"layout":{"x":0,"y":0,"width":12,"height":14}},{"id":6933869521489876,"definition":{"title":"Load Balancer","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3888095297957842,"definition":{"title":"NLB - Bytes Processed","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:aws.networkelb.processed_bytes{$loadbalancer} by {name}.as_rate()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":6087305108926438,"definition":{"title":"Active Flow Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"sum:aws.networkelb.active_flow_count{$loadbalancer} by {loadbalancer}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":5244475380453236,"definition":{"title":"NLB - 초당 요청 건수","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:aws.networkelb.new_flow_count{$loadbalancer} by {loadbalancer}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":8246167150111940,"definition":{"title":"NLB - New Connections","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:aws.networkelb.new_flow_count{$loadbalancer} by {loadbalancer}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":1213484690917120,"definition":{"title":"ALB - 대상당 초당 요청 건수","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:aws.applicationelb.request_count_per_target{$applicationloadbalancer} by {loadbalancer}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":2,"width":4,"height":2}}]},"layout":{"x":0,"y":14,"width":12,"height":5}},{"id":5538966170795046,"definition":{"title":"DX/TGW","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8632059313419644,"definition":{"title":"KINX_Shieldus_ARGOS_Signal_1st","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.dx.connection_state{connectionid:dxcon-fh891mus} by {connectionid}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":5958736718359108,"definition":{"title":"KINX_Shieldus_ARGOS_Signal_2nd","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.dx.connection_state{connectionid:dxcon-fg44j36q} by {connectionid}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":2016372679817184,"definition":{"title":"LGUP_Shieldus_ARGOS_Signal_3rd","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.dx.connection_state{connectionid:dxcon-fg6a3n0g} by {connectionid}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":5932879081302444,"definition":{"title":"KINX_Shieldus_ARGOS_Data_1st","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.dx.connection_state{connectionid:dxcon-fh5l0k7k} by {connectionid}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":225078397461204,"definition":{"title":"LGUP_Shieldus_ARGOS_Data_2nd","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.dx.connection_state{connectionid:dxcon-fg6pdahf} by {connectionid}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":4821641049416730,"definition":{"title":"SKCC_Shieldus_ARGOS_CusCenter_1st","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.dx.connection_state{connectionid:dxcon-fgqxwnve} by {connectionid}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":1542378207734254,"definition":{"title":"SKCC_Shieldus_ARGOS_CusCenter_2nd\t","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.dx.connection_state{connectionid:dxcon-fh2s52kw} by {connectionid}"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":2340791403338216,"definition":{"title":"aws.dx.ppx.ingress_byVIF","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.dx.virtual_interface_pps_ingress{aws_account:123456789012} by {virtualinterfaceid}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"value":"y = 0","display_type":"error dashed"}]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":6708249122207974,"definition":{"title":"TGW_PacketDropCountNoRoute_ByAttachments","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"sum:aws.transitgateway.packet_drop_count_no_route{transitgateway:tgw-055c4967d80e517e2} by {transitgatewayattachment}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":4,"width":4,"height":2}},{"id":7326270572827394,"definition":{"title":"TGW_PacketDropCountBlackhole_byAttachments","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query2","data_source":"metrics","query":"sum:aws.transitgateway.packet_drop_count_blackhole{transitgateway:tgw-055c4967d80e517e2} by {transitgatewayattachment}.as_count()"}],"formulas":[{"formula":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":6,"width":4,"height":2}}]},"layout":{"x":0,"y":19,"width":12,"height":9}},{"id":7847425656651768,"definition":{"title":"Aurora MySQL","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":7967020103473282,"definition":{"title":"CPU","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"}],"queries":[{"query":"avg:aws.rds.cpuutilization{dbinstanceidentifier:sksh-argos-p-aurora-mysql-master-rci}","data_source":"metrics","name":"query1"},{"query":"avg:aws.rds.cpuutilization{dbinstanceidentifier:sksh-argos-p-aurora-mysql-reader-rci}","data_source":"metrics","name":"query2"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":4376077306294202,"definition":{"title":"RAM available","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.rds.freeable_memory{*,*,*,engine:aurora*} by {dbinstanceidentifier}"}],"style":{"palette":"cool"},"display_type":"line"}],"custom_links":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":5874665687631408,"definition":{"title":"DBLoad","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.rds.dbload{dbinstanceidentifier:sksh-argos-p-aurora-mysql-master-rci}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":2997521232412162,"definition":{"title":"DML (INSERT/UPDATE/DELETE) Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.rds.dmllatency{*,*,*,dbinstanceidentifier:sksh-argos-p-aurora-mysql*} by {dbinstanceidentifier}"}],"response_format":"timeseries","style":{"palette":"purple"},"display_type":"line"}],"custom_links":[]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":3025125218636918,"definition":{"title":"Select Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.rds.select_latency{*} by {name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":4716428823527234,"definition":{"title":"Commit Latency","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.rds.commit_latency{dbclusteridentifier:sksh-argos-p-aurora-mysql*} by {name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":517721952452726,"definition":{"title":"Dead lock","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:aws.rds.deadlocks{dbinstanceidentifier:sksh-argos-p-aurora-mysql*} by {name,engine,dbclusteridentifier}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":8833514144377532,"definition":{"title":"ROW Lock","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:mysql.innodb.row_lock_time{dbclusteridentifier:sksh-argos-p-aurora-mysql} by {dbinstanceidentifier}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":3852092318371940,"definition":{"title":"Performance Slow Queries","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:mysql.performance.slow_queries{dbclusteridentifier:sksh-argos-p-aurora-mysql*} by {dbinstanceidentifier}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":4,"width":4,"height":2}},{"id":8290111909588038,"definition":{"title":"Connection","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:mysql.performance.slow_queries{dbclusteridentifier:sksh-argos-p-aurora-mysql*} by {dbinstanceidentifier}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":6,"width":4,"height":2}}]},"layout":{"x":0,"y":28,"width":12,"height":9,"is_column_break":true}},{"id":3767305860010040,"definition":{"title":"EC2","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2338607404152110,"definition":{"title":"GW","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:system.cpu.user{aws_account:123456789012,region:ap-northeast-2,environment:prd,ec2type:gw} by {host}"}},"node_type":"host","no_metric_hosts":true,"no_group_hosts":true,"group":["availability-zone"],"scope":["aws_account:123456789012","region:ap-northeast-2","environment:prd","ec2type:gw"],"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":0,"y":0,"width":6,"height":5}},{"id":5787512966265010,"definition":{"title":"EKS Node","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:system.cpu.user{aws_account:123456789012,ec2type:eksnode} by {host}"}},"node_type":"host","no_metric_hosts":true,"no_group_hosts":true,"group":["availability-zone"],"scope":["aws_account:123456789012","ec2type:eksnode"],"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":6,"y":0,"width":6,"height":5}},{"id":7804849863906084,"definition":{"title":"Mobile","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:system.cpu.user{aws_account:123456789012,region:ap-northeast-2,environment:prd,ec2type:mobile} by {host}"}},"node_type":"host","no_metric_hosts":true,"no_group_hosts":true,"group":["availability-zone"],"scope":["aws_account:123456789012","region:ap-northeast-2","environment:prd","ec2type:mobile"],"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":0,"y":5,"width":4,"height":3}},{"id":504926274898370,"definition":{"title":"Solution","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:system.cpu.user{aws_account:123456789012,region:ap-northeast-2,environment:prd,ec2type:solution} by {host}"}},"node_type":"host","no_metric_hosts":true,"no_group_hosts":true,"group":["availability-zone"],"scope":["aws_account:123456789012","region:ap-northeast-2","environment:prd","ec2type:solution"],"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":4,"y":5,"width":4,"height":3}},{"id":71056902793854,"definition":{"title":"Infra 운영","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:system.cpu.user{aws_account:123456789012,region:ap-northeast-2,environment:prd,ec2type:infra} by {host}"}},"node_type":"host","no_metric_hosts":true,"no_group_hosts":true,"group":["availability-zone"],"scope":["aws_account:123456789012","region:ap-northeast-2","environment:prd","ec2type:infra"],"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":8,"y":5,"width":4,"height":3}},{"id":5999514203788816,"definition":{"title":"모니터링 서버 수 (Agent running)","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"comparator":">","palette":"white_on_green","value":1}],"response_format":"scalar","queries":[{"query":"sum:datadog.agent.running{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*}","data_source":"metrics","name":"query1","aggregator":"max"}]}],"autoscale":true,"precision":0},"layout":{"x":0,"y":8,"width":2,"height":2}},{"id":910035993694428,"definition":{"title":"EC2 CPU 및 메모리, Disk, Uptime, 전송 Bytes","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"cpu.user","conditional_formats":[{"palette":"white_on_green","comparator":"<","value":40},{"palette":"white_on_yellow","comparator":">=","value":40},{"palette":"white_on_red","comparator":">=","value":60}],"formula":"query1","limit":{"count":100,"order":"desc"}},{"alias":"cpu.system","conditional_formats":[{"palette":"white_on_green","comparator":"<","value":40},{"palette":"white_on_yellow","comparator":">=","value":40},{"palette":"white_on_red","comparator":">=","value":60}],"formula":"query2"},{"alias":"net.rcvd","conditional_formats":[{"palette":"white_on_green","comparator":"<","value":5000000},{"palette":"white_on_yellow","comparator":"<","value":10000000},{"palette":"white_on_red","comparator":">=","value":10000000}],"formula":"query4"},{"alias":"net.sent","conditional_formats":[{"palette":"white_on_green","comparator":"<","value":5000000},{"palette":"white_on_yellow","comparator":"<","value":10000000},{"palette":"white_on_red","comparator":">=","value":10000000}],"formula":"query5"},{"alias":"disk.free","conditional_formats":[{"palette":"white_on_green","comparator":">","value":5000000000},{"palette":"white_on_yellow","comparator":"<=","value":5000000000},{"palette":"white_on_red","comparator":"<=","value":3000000000}],"formula":"query6"},{"alias":"mem.usable","conditional_formats":[{"palette":"white_on_green","comparator":"<","value":0.7},{"palette":"white_on_yellow","comparator":">=","value":0.7},{"palette":"white_on_red","comparator":">=","value":0.9}],"formula":"(1 - query3)"}],"response_format":"scalar","queries":[{"query":"avg:system.cpu.user{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:system.cpu.system{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query2","aggregator":"avg"},{"query":"avg:system.net.bytes_rcvd{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query4","aggregator":"avg"},{"query":"avg:system.net.bytes_sent{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query5","aggregator":"avg"},{"query":"avg:system.disk.free{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query6","aggregator":"avg"},{"query":"avg:system.mem.pct_usable{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query3","aggregator":"avg"}]}]},"layout":{"x":2,"y":8,"width":10,"height":2}},{"id":8563481954532216,"definition":{"title":"CPU Usage Top 10 Host","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1 + query2","limit":{"count":500,"order":"desc"}}],"conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":70},{"comparator":">","palette":"white_on_red","value":80}],"response_format":"scalar","queries":[{"query":"avg:system.cpu.user{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:system.cpu.system{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query2","aggregator":"avg"}]}],"style":{}},"layout":{"x":0,"y":10,"width":4,"height":3}},{"id":5534414733341106,"definition":{"title":"호스트별 사용 메모리 Top10 (높은 순)","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"(1 - query1) * 100","limit":{"count":500,"order":"desc"}}],"conditional_formats":[{"comparator":">","palette":"white_on_red","value":90},{"comparator":">","palette":"white_on_yellow","value":70},{"comparator":"<=","palette":"white_on_green","value":70}],"response_format":"scalar","queries":[{"query":"avg:system.mem.pct_usable{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"style":{}},"layout":{"x":4,"y":10,"width":4,"height":3}},{"id":3434348976615912,"definition":{"title":"Disk Usage and Total","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Disk Usage(%)","conditional_formats":[{"palette":"white_on_green","comparator":"<","value":70},{"palette":"white_on_yellow","comparator":"<","value":80},{"palette":"white_on_red","comparator":"<","value":90}],"formula":"query2","limit":{"count":500,"order":"desc"}},{"alias":"Available Disk(GB)","formula":"query1"}],"response_format":"scalar","queries":[{"query":"avg:system.disk.in_use{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host,device}","data_source":"metrics","name":"query2","aggregator":"last"},{"query":"avg:system.disk.free{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host,device}","data_source":"metrics","name":"query1","aggregator":"last"}]}]},"layout":{"x":8,"y":10,"width":4,"height":3}},{"id":4553236175199432,"definition":{"title":"CPU Usage (user+system+iowait)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"},{"formula":"query2"},{"formula":"query3"},{"formula":"query1 + query2 + query3"}],"queries":[{"query":"avg:system.cpu.user{!name:sksh-argos-p-infra-ops-*,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query1"},{"query":"avg:system.cpu.system{!name:sksh-argos-p-infra-ops-*,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query2"},{"query":"avg:system.cpu.iowait{!name:sksh-argos-p-infra-ops-*,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query3"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"max":"100"},"markers":[{"label":"y = 80","value":"y = 80","display_type":"error dashed"}]},"layout":{"x":0,"y":13,"width":4,"height":3}},{"id":8412496169516822,"definition":{"title":"호스트별 네트워크 수신 (byte per sec)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:system.net.bytes_rcvd{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[{"label":"y = 10000000","value":"y = 10000000","display_type":"error dashed"}]},"layout":{"x":4,"y":13,"width":4,"height":3}},{"id":8564698677494526,"definition":{"title":"호스트별 네트워크 수신 (byte per sec)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:system.net.bytes_rcvd{!name:sksh-argos-p-infra-ops-ec2-2c-01,name:sksh-argos-p*} by {name,host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[{"label":"y = 10000000","value":"y = 10000000","display_type":"error dashed"}]},"layout":{"x":8,"y":13,"width":4,"height":3}}]},"layout":{"x":0,"y":37,"width":12,"height":17}},{"id":670168219892002,"definition":{"title":"MSK","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2224834443357541,"definition":{"title":"Disk usage (data logs)","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.kafka.kafka_data_logs_disk_used{*} by {broker_id}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":5928629635058214,"definition":{"title":"Disk usage (application logs)","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.kafka.kafka_app_logs_disk_used{*} by {broker_id}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":2913063532993721,"definition":{"title":"Average ZooKeeper request latency (ms)","title_size":"16","title_align":"left","show_legend":false,"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.kafka.zoo_keeper_request_latency_ms_mean{*}"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"label":"","scale":"linear","include_zero":true,"min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":8,"y":0,"width":4,"height":2}}]},"layout":{"x":0,"y":54,"width":12,"height":3}},{"id":1969078172936720,"definition":{"title":"SQS","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8154741521778042,"definition":{"title":"SQS service status","title_size":"13","title_align":"center","time":{"live_span":"30m"},"type":"check_status","check":"aws.status","grouping":"cluster","tags":["service:sqs"]},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":4223138036387818,"definition":{"title":"SQS Message ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","max","value","sum","min"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.sqs.approximate_number_of_messages_visible{*} by {queuename}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":2,"y":0,"width":10,"height":2}},{"id":1802476352709042,"definition":{"title":"Received","title_size":"13","title_align":"center","time":{"live_span":"1d"},"type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.sqs.number_of_messages_received{*,*}.as_count()","aggregator":"max"}]}],"autoscale":true,"text_align":"center","custom_links":[],"precision":0},"layout":{"x":0,"y":2,"width":2,"height":2}},{"id":5491290968376946,"definition":{"title":"Sent","title_size":"13","title_align":"center","time":{"live_span":"1d"},"type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.sqs.number_of_messages_sent{*,*}.as_count()","aggregator":"max"}]}],"autoscale":true,"text_align":"center","custom_links":[],"precision":0},"layout":{"x":2,"y":2,"width":2,"height":2}},{"id":2134795763977930,"definition":{"title":"Empty messages received","title_size":"13","title_align":"center","time":{"live_span":"1d"},"type":"query_value","requests":[{"conditional_formats":[{"comparator":">","value":10,"palette":"white_on_red"}],"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.sqs.number_of_empty_receives{*,*}.as_count()","aggregator":"max"}]}],"autoscale":false,"custom_unit":"","text_align":"center","custom_links":[],"precision":0},"layout":{"x":4,"y":2,"width":2,"height":2}},{"id":4316349884220708,"definition":{"title":"Deleted","title_size":"13","title_align":"center","time":{"live_span":"1d"},"type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.sqs.number_of_messages_deleted{*,*}.as_count()","aggregator":"max"}]}],"autoscale":true,"text_align":"center","custom_links":[],"precision":0},"layout":{"x":6,"y":2,"width":2,"height":2}},{"id":3097590038490094,"definition":{"title":"Message state","title_size":"13","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"1d"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.sqs.approximate_number_of_messages_delayed{*,*}"},{"data_source":"metrics","name":"query2","query":"sum:aws.sqs.approximate_number_of_messages_visible{*,*}"},{"data_source":"metrics","name":"query3","query":"sum:aws.sqs.approximate_number_of_messages_not_visible{*,*}"}],"style":{"palette":"dog_classic"},"display_type":"area"}],"custom_links":[]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":4337653550542,"definition":{"title":"Number of messages sent to each queue","title_size":"13","title_align":"left","time":{"live_span":"1d"},"type":"toplist","requests":[{"style":{"palette":"grey"},"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:aws.sqs.number_of_messages_sent{*,*} by {queuename}.as_rate()","aggregator":"sum"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}],"custom_links":[]},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":2042188947827760,"definition":{"title":"SQS message size by queue","title_size":"13","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"1d"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.sqs.sent_message_size{*,*} by {queuename}"}],"style":{"palette":"grey"},"display_type":"line"}],"markers":[{"label":"Message chunk size","value":"y = 64K","display_type":"warning dashed"},{"label":"Maximum message size","value":"y = 256000","display_type":"error dashed"}],"custom_links":[]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":7260242864695664,"definition":{"title":"SQS oldest message age by queue","title_size":"13","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"1d"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.sqs.approximate_age_of_oldest_message{*,*} by {queuename}"}],"display_type":"line"}],"custom_links":[]},"layout":{"x":8,"y":4,"width":4,"height":2}}]},"layout":{"x":0,"y":57,"width":12,"height":7}},{"id":7517278488112288,"definition":{"title":"Storage","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":289136364582382,"definition":{"title":"Top List for S3 Bucket Size ","title_size":"16","title_align":"left","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.s3.bucket_size_bytes{*} by {bucketname}","aggregator":"avg"}],"formulas":[{"formula":"query1"}]}],"type":"sunburst"},"layout":{"x":0,"y":0,"width":6,"height":4}},{"id":4227556615585914,"definition":{"title":"EFS Size","title_size":"16","title_align":"left","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.efs.storage_bytes{*} by {name}","aggregator":"avg"}],"formulas":[{"formula":"query1"}]}],"type":"sunburst"},"layout":{"x":6,"y":0,"width":6,"height":4}}]},"layout":{"x":0,"y":64,"width":12,"height":5}},{"id":5108261394630060,"definition":{"title":"EKS Cluster 정보","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":1100285687874280,"definition":{"title":"Node CNT","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes_state.node.status{$kube_cluster_name,status:schedulable}","aggregator":"last"}],"formulas":[{"formula":"query1"}]}],"autoscale":true,"precision":0,"timeseries_background":{"yaxis":{"include_zero":false},"type":"bars"}},"layout":{"x":0,"y":0,"width":1,"height":1}},{"id":2840305625150070,"definition":{"title":"AZ-A","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes_state.node.status{aws_eks_cluster-name:$kube_cluster_name.value,availability-zone:ap-northeast-2a*}","aggregator":"last"}],"formulas":[{"formula":"query1"}]}],"autoscale":true,"precision":0,"timeseries_background":{"type":"bars"}},"layout":{"x":1,"y":0,"width":1,"height":1}},{"id":339504678330520,"definition":{"title":"AZ-B","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes_state.node.status{aws_eks_cluster-name:$kube_cluster_name.value,availability-zone:ap-northeast-2b}","aggregator":"last"}],"formulas":[{"formula":"query1"}]}],"autoscale":true,"precision":0,"timeseries_background":{"type":"bars"}},"layout":{"x":2,"y":0,"width":1,"height":1}},{"id":4247883279937104,"definition":{"title":"AZ-C","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes_state.node.status{aws_eks_cluster-name:$kube_cluster_name.value,availability-zone:ap-northeast-2c}","aggregator":"last"}],"formulas":[{"formula":"query1"}]}],"autoscale":true,"precision":0,"timeseries_background":{"type":"bars"}},"layout":{"x":3,"y":0,"width":1,"height":1}},{"id":4647786378341414,"definition":{"title":"Node - pod count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes.pods.running{$kube_cluster_name,$kube_namespace,$kube_deployment,pod_phase:running} by {host,availability-zone}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":0,"width":4,"height":4}},{"id":5941844509376042,"definition":{"title":"Node AZ count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"formula":"query3"}],"queries":[{"query":"sum:kubernetes_state.node.status{$kube_cluster_name,status:schedulable,availability-zone:*} by {availability-zone}.fill(last, 1)","data_source":"metrics","name":"query3"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":4}},{"id":5963017277705320,"definition":{"title":"Node count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max"],"type":"timeseries","requests":[{"formulas":[{"formula":"query3"}],"queries":[{"query":"sum:kubernetes_state.node.status{$kube_cluster_name,status:schedulable}.fill(last, 1)","data_source":"metrics","name":"query3"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":1,"width":4,"height":3}},{"id":2394064711803890,"definition":{"title":"Pods Running By Namespace","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"conditional_formats":[{"palette":"white_on_red","value":2000,"comparator":">"},{"palette":"white_on_yellow","value":1500,"comparator":">"},{"palette":"white_on_green","value":3000,"comparator":"<="}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.pods.running{$kube_cluster_name} by {kube_cluster_name,kube_namespace}","data_source":"metrics","name":"query1","aggregator":"max"}]}],"custom_links":[],"style":{}},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":3718888235694122,"definition":{"title":"Pods in Ready State By Node","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"conditional_formats":[{"palette":"white_on_green","value":24,"comparator":"<="},{"palette":"white_on_red","value":32,"comparator":">"},{"palette":"white_on_yellow","value":24,"comparator":">"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.pod.ready{$kube_cluster_name,condition:true} by {kube_cluster_name,name,eks_nodegroup-name}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"custom_links":[],"style":{}},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":6821785151653728,"definition":{"title":"Pods in Bad State by Namespace","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"exclude_null(query1)","limit":{"count":10,"order":"desc"}}],"conditional_formats":[{"palette":"white_on_red","value":0,"comparator":">"},{"palette":"white_on_green","value":0,"comparator":"<="}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.pod.ready{condition:false,$kube_cluster_name,!pod_phase:succeeded} by {kube_namespace}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"custom_links":[]},"layout":{"x":8,"y":4,"width":4,"height":2}},{"id":8910036893721972,"definition":{"title":"Pods Status Phase","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"failed","formula":"query1"},{"alias":"pending","formula":"query2"},{"alias":"running","formula":"query3"},{"alias":"succeeded","formula":"query4"}],"queries":[{"query":"sum:kubernetes_state.pod.status_phase{$kube_cluster_name,pod_phase:failed}","data_source":"metrics","name":"query1"},{"query":"sum:kubernetes_state.pod.status_phase{$kube_cluster_name,pod_phase:pending}","data_source":"metrics","name":"query2"},{"query":"sum:kubernetes_state.pod.status_phase{$kube_cluster_name,pod_phase:running}","data_source":"metrics","name":"query3"},{"query":"sum:kubernetes_state.pod.status_phase{$kube_cluster_name,pod_phase:succeeded}","data_source":"metrics","name":"query4"}],"response_format":"timeseries","style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":6,"width":4,"height":2}},{"id":631014807903076,"definition":{"title":"CPU-intensive pods","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.cpu.usage.total{$kube_cluster_name,$kube_namespace,!pod_name:no_pod} by {pod_name}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":4,"y":6,"width":4,"height":2}},{"id":3151606663755560,"definition":{"title":"Memory-intensive pods","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.memory.usage{$kube_cluster_name,$kube_namespace,!pod_name:no_pod} by {pod_name}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":6,"width":4,"height":2}},{"id":4279876735735328,"definition":{"title":"EKS Container 상태","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:process.stat.container.io.wbps{$kube_cluster_name,$kube_namespace} by {host}"}},"node_type":"container","no_metric_hosts":true,"no_group_hosts":true,"group":["kube_deployment"],"scope":["$kube_cluster_name","$kube_namespace"],"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":0,"y":8,"width":12,"height":5}},{"id":5650662284229366,"definition":{"title":"클러스터별 CPU 및 메모리","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"CPU request","formula":"query1","limit":{"count":500,"order":"desc"}},{"alias":"Memory request","formula":"query2"},{"conditional_formats":[{"comparator":"<","palette":"white_on_red","value":60}],"alias":"CPU 사용량","formula":"query3"},{"conditional_formats":[{"comparator":"<","palette":"white_on_red","value":60}],"alias":"memory 사용량","formula":"query4"},{"alias":"CPU usage / request","conditional_formats":[],"formula":"query3 / (query1 * 1000000000) * 100"},{"alias":"MEM usage / request","formula":"query4 / query2 * 100"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes.cpu.requests{*,*} by {kube_cluster_name}","aggregator":"avg"},{"name":"query2","data_source":"metrics","query":"sum:kubernetes.memory.requests{*,*,*,*} by {kube_cluster_name}","aggregator":"avg"},{"name":"query3","data_source":"metrics","query":"sum:kubernetes.cpu.usage.total{*,*,*,*} by {kube_cluster_name}","aggregator":"avg"},{"name":"query4","data_source":"metrics","query":"sum:kubernetes.memory.usage{*,*,*,*} by {kube_cluster_name}","aggregator":"avg"}]}],"has_search_bar":"auto"},"layout":{"x":0,"y":13,"width":12,"height":2}}]},"layout":{"x":0,"y":69,"width":12,"height":16}},{"id":3462096707231464,"definition":{"title":"Redis","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4690221957054736,"definition":{"title":"sksh-argos-p-redis-001 item","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.elasticache.curr_items{cacheclusterid:sksh-argos-p-redis-001}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":false,"custom_unit":" ","precision":0},"layout":{"x":0,"y":0,"width":4,"height":1}},{"id":2541093265978658,"definition":{"title":"sksh-argos-p-redis-001 avg size","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query2 / query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.elasticache.curr_items{cacheclusterid:sksh-argos-p-redis-001}","data_source":"metrics","name":"query1","aggregator":"last"},{"query":"sum:aws.elasticache.bytes_used_for_cache{cacheclusterid:sksh-argos-p-redis-001}","data_source":"metrics","name":"query2","aggregator":"last"}]}],"autoscale":true,"custom_unit":" ","precision":2},"layout":{"x":4,"y":0,"width":4,"height":1}},{"id":2785826186893754,"definition":{"title":"sksh-argos-p-redis-001 memory","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.elasticache.bytes_used_for_cache{cacheclusterid:sksh-argos-p-redis-001}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"custom_unit":" ","precision":2},"layout":{"x":8,"y":0,"width":4,"height":1}},{"id":658501794748162,"definition":{"title":"Redis Item Count","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max"],"type":"timeseries","requests":[{"formulas":[{"alias":"item.count","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.elasticache.curr_items{engine:redis} by {cacheclusterid}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":1,"width":6,"height":6}},{"id":5547096555518616,"definition":{"title":"Redis Item Memory Usage","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max"],"type":"timeseries","requests":[{"formulas":[{"alias":"item.memory","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.elasticache.bytes_used_for_cache{engine:redis} by {cacheclusterid}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":1,"width":6,"height":6}},{"id":1820223610998324,"definition":{"title":"Redis CPU(%)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max"],"type":"timeseries","requests":[{"formulas":[{"alias":"cpu","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.elasticache.cpuutilization{engine:redis} by {cacheclusterid}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":7,"width":4,"height":6}},{"id":7260424342457528,"definition":{"title":"Redis MEM(%)","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max"],"type":"timeseries","requests":[{"formulas":[{"alias":"mem","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.elasticache.database_memory_usage_percentage{engine:redis} by {cacheclusterid}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":7,"width":4,"height":6}},{"id":7849227822423896,"definition":{"title":"Redis throughput","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max"],"type":"timeseries","requests":[{"formulas":[{"alias":"throughput","formula":"query1 + query2"}],"response_format":"timeseries","queries":[{"query":"sum:aws.elasticache.get_type_cmds{engine:redis} by {cacheclusterid}.as_rate()","data_source":"metrics","name":"query1"},{"query":"sum:aws.elasticache.set_type_cmds{engine:redis} by {cacheclusterid}.as_rate()","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":7,"width":4,"height":6}}]},"layout":{"x":0,"y":85,"width":12,"height":14}},{"id":521101866960406,"definition":{"title":"MariaDB(01:IGP, 02:CAD)","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4005115773988464,"definition":{"title":"CPU","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"query":"avg:aws.rds.cpuutilization{dbinstanceidentifier:sksh-argos-p-rds-mariadb*} by {name}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":5005423544787894,"definition":{"title":"RAM available","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"metrics","name":"query1","query":"avg:aws.rds.freeable_memory{*,*,*,dbinstanceidentifier:sksh-argos-p-rds-mariadb*} by {dbinstanceidentifier}"}],"response_format":"timeseries","style":{"palette":"cool"},"display_type":"line"}],"custom_links":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":5035902240674790,"definition":{"title":"DBLoad","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:aws.rds.dbload{dbinstanceidentifier:sksh-argos-p-rds-mariadb*} by {name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":0,"width":4,"height":2}}]},"layout":{"x":0,"y":99,"width":12,"height":3}}],"template_variables":[{"name":"loadbalancer","prefix":"loadbalancer","available_values":[],"default":"*"},{"name":"applicationloadbalancer","prefix":"loadbalancer","available_values":[],"default":"*"},{"name":"kube_cluster_name","prefix":"kube_cluster_name","available_values":[],"default":"sksh-argos-p-eks-ui"},{"name":"kube_namespace","prefix":"kube_namespace","available_values":[],"default":"argos"},{"name":"kube_deployment","prefix":"kube_deployment","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}