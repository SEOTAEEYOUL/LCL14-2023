{"title":"AWS EC2 Overview","description":"This dashboard visualizes high-level resource metrics from your EC2 instances, so you can monitor the performance of your AWS compute infrastructure. For further reading on AWS EC2 monitoring, see:\n\n- [Datadog's guide to key AWS EC2 metrics](https://www.datadoghq.com/blog/ec2-monitoring/)\n\n- [How to collect AWS EC2 metrics using AWS CloudWatch](https://www.datadoghq.com/blog/collecting-ec2-metrics/)\n\n- [How to monitor AWS EC2 with Datadog](https://www.datadoghq.com/blog/monitoring-ec2-instances-with-datadog/)\n\n- [Datadog's AWS EC2 integration docs](https://docs.datadoghq.com/integrations/amazon_ec2/)\n\n- [Monitor AWS Auto Scaling with Datadog](https://www.datadoghq.com/blog/monitor-aws-auto-scaling/)\n\nClone this template AWS EC2 dashboard to make changes and add your own graph widgets.","widgets":[{"id":5598283888245340,"definition":{"title":"New group","banner_img":"/static/images/integration_dashboard/amazon-ec2_hero_1.png","show_title":false,"type":"group","layout_type":"ordered","widgets":[{"id":4290965940962536,"definition":{"type":"note","content":"This dashboard provides a bird's eye view of your EC2 instances, so you can easily monitor the performance of your AWS compute infrastructure. Use the provided template variables to view metrics in various aggregations or at an individual host or instance level.\n\nRemember to install the [Datadog Agent](https://www.datadoghq.com/blog/monitoring-ec2-instances-with-datadog/#deploying-the-agent) to receive the most comprehensive metrics across your individual instances.\n\nBe sure to [enable Detailed Monitoring](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-cloudwatch-new.html) on your Amazon EC2 Instances from the AWS console to make sure your metrics are reported in one-minute intervals. \n\nThis dashboard also draws metrics from the AWS Auto Scale Integration, it can be configured by following along with the [ Auto Scale Documentation](https://docs.datadoghq.com/integrations/amazon_auto_scaling/).","background_color":"white","font_size":"14","text_align":"center","vertical_align":"center","show_tick":false,"tick_pos":"50%","tick_edge":"bottom","has_padding":true},"layout":{"x":0,"y":0,"width":6,"height":3}}]},"layout":{"x":0,"y":0,"width":6,"height":6}},{"id":8653890605465464,"definition":{"title":"Overview","background_color":"white","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6211278440885832,"definition":{"title":"EC2 Service Status","title_size":"13","title_align":"center","type":"check_status","check":"aws.status","grouping":"cluster","tags":["service:ec2"]},"layout":{"x":0,"y":0,"width":3,"height":1}},{"id":4941547019931460,"definition":{"title":"Max Active EC2 Instances","title_size":"13","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.ec2.host_ok{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host}","data_source":"metrics","name":"query1","aggregator":"max"}]}],"autoscale":true,"text_align":"center","precision":2},"layout":{"x":3,"y":0,"width":3,"height":1}},{"id":4832156751777392,"definition":{"title":"Active Instances by Type","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.ec2.host_ok{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {instance-type}","data_source":"metrics","name":"query1","aggregator":"max"}]}]},"layout":{"x":0,"y":1,"width":6,"height":4}},{"id":4633945038567350,"definition":{"title":"EC2 Monitors","type":"manage_status","display_format":"countsAndList","color_preference":"text","hide_zero_counts":true,"query":"metric:aws.ec2*","sort":"status,asc","count":50,"start":0,"summary_type":"monitors","show_priority":false,"show_last_triggered":false},"layout":{"x":0,"y":5,"width":6,"height":5}},{"id":2506516578706540,"definition":{"title":"EC2 Hosts Failing Status Check","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"cutoff_min(query1, 0.9)","limit":{"count":500,"order":"desc"}}],"conditional_formats":[{"comparator":">=","palette":"white_on_red","value":1}],"response_format":"scalar","queries":[{"query":"max:aws.ec2.status_check_failed{$instance_id,$instance_type,$image_id,$autoscaling_group,$region,$scope,$service,$host} by {host}","data_source":"metrics","name":"query1","aggregator":"max"}]}]},"layout":{"x":0,"y":10,"width":6,"height":2}}]},"layout":{"x":6,"y":0,"width":6,"height":13}},{"id":632243449160510,"definition":{"title":"EC2 Events","title_size":"16","title_align":"left","requests":[{"query":{"query_string":"source:amazon_ec2 $scope $region $autoscaling_group $image_id $instance_type $instance_id $service $host","data_source":"event_stream","event_size":"l"},"columns":[],"response_format":"event_list"}],"type":"list_stream"},"layout":{"x":0,"y":6,"width":6,"height":3}},{"id":6759302869099248,"definition":{"title":"EC2 Host Map","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:aws.ec2.status_check_failed{$service,$instance_id,$instance_type,$image_id,$region,$autoscaling_group,$scope} by {host}"}},"node_type":"host","no_metric_hosts":false,"no_group_hosts":false,"group":["region"],"scope":["$service","$instance_id","$instance_type","$image_id","$region","$autoscaling_group","$scope"],"style":{"palette":"green_to_orange","palette_flip":false}},"layout":{"x":0,"y":9,"width":6,"height":4}},{"id":8830640349795874,"definition":{"title":"Agent Metrics","background_color":"vivid_purple","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3195773651307302,"definition":{"type":"note","content":"The following widgets contain metrics generated by the Datadog Agent. They are most beneficial when filtered by a single host. \n\n**It is best practice to install the datadog agent on all EC2 instances to get more metrics such as memory usage every 15s along with 150+ agent integrations to monitor what is running on your EC2 instances. [See the installation instructions](https://docs.datadoghq.com/agent/) for more details.**","background_color":"purple","font_size":"14","text_align":"left","vertical_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"bottom","has_padding":true},"layout":{"x":0,"y":0,"width":12,"height":1}},{"id":6235271877382178,"definition":{"title":"Memory Breakdown","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Usable Memory","formula":"query1"},{"alias":"Memory Used","formula":"query2 - query1"}],"response_format":"timeseries","queries":[{"query":"sum:system.mem.usable{$host,$service,$instance_id,$instance_type,$image_id,$autoscaling_group,$region,$scope} by {host}","data_source":"metrics","name":"query1"},{"query":"sum:system.mem.total{$host,$service,$instance_id,$instance_type,$image_id,$autoscaling_group,$region,$scope} by {host}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"layout":{"x":0,"y":1,"width":4,"height":3}},{"id":7833989929785484,"definition":{"title":"Disk Usage by Device (%)","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Disk Use %","formula":"query1 * 100"}],"response_format":"timeseries","queries":[{"query":"max:system.disk.in_use{$host,$service,$instance_id,$instance_type,$image_id,$autoscaling_group,$region,$scope} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"markers":[{"label":"full","value":"y = 100","display_type":"error dashed"}]},"layout":{"x":4,"y":1,"width":4,"height":3}},{"id":1824936286196414,"definition":{"title":"Available Swap","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Free Swap","formula":"query1"},{"alias":"Used Swap","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"avg:system.swap.free{$host,$service,$instance_id,$instance_type,$image_id,$autoscaling_group,$region,$scope} by {host}","data_source":"metrics","name":"query1"},{"query":"avg:system.swap.used{$host,$service,$instance_id,$instance_type,$image_id,$autoscaling_group,$region,$scope} by {host}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":1,"width":4,"height":3}},{"id":443908533126670,"definition":{"title":"Load Averages 1-5-15 Min","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"1 min","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:system.load.1{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"5 min","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:system.load.5{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"formulas":[{"alias":"15 min","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"avg:system.load.15{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":0,"y":4,"width":4,"height":3}},{"id":2974238820069780,"definition":{"title":"Disk Latency by Device","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Await Time","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"max:system.io.await{$host,$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service} by {device}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":4,"y":4,"width":4,"height":3}},{"id":4148570508886194,"definition":{"title":"Processes Memory Usage","type":"treemap","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"avg:system.processes.mem.pct{$host,$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service} by {process_name}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":4,"width":4,"height":3}}]},"layout":{"x":0,"y":13,"width":12,"height":8}},{"id":4854325100873916,"definition":{"title":"CPU","background_color":"vivid_orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6371273102315016,"definition":{"type":"note","content":"\nCPU usage is one of the prime host-level metrics to monitor. Depending on the application, consistently high utilization levels may be normal. But if performance is degraded, and the application is not constrained by disk I/O, memory, or network resources, then maxed-out CPU may indicate a resource bottleneck or application performance problems.\n\nTracking CPU usage can help ensure that your instances are appropriately sized for your workload.","background_color":"orange","font_size":"14","text_align":"left","vertical_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":0,"width":3,"height":3}},{"id":777534401171686,"definition":{"title":"CPU Utilization by Instance Type","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"response_format":"timeseries","queries":[{"query":"avg:aws.ec2.cpuutilization{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {instance-type}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":3,"y":0,"width":5,"height":3}},{"id":6586391600184304,"definition":{"title":"CPU Utilization by Host","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Usage","limit":{"count":500,"order":"desc"},"formula":"query2"}],"response_format":"scalar","queries":[{"query":"avg:aws.ec2.cpuutilization{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {host}","data_source":"metrics","name":"query2","aggregator":"avg"}]}]},"layout":{"x":8,"y":0,"width":4,"height":3}},{"id":5204755705792152,"definition":{"type":"note","content":"\nOne CPU credit is equivalent to one minute of 100 percent CPU utilization (or two minutes at 50 percent, etc.). Whenever an instance requires CPU performance above that instance type’s baseline, it will burst, consuming CPU credits until the demand lessens or the credit balance runs out. \n\nMonitoring your instances’ credit usage will help you identify whether you might need to switch to an instance type that is optimized for CPU-intensive workloads. \n\nYou can also create a monitor for when your credit balance drops below a threshold while CPU usage remains above baseline.\n\nSurplus credits are what is spent by an unlimited instance when its CPUCreditBalance value is zero. The number of consumed surplus credits shows what has not been paid down by earned CPU credits, and which will incur an additional charge.","background_color":"orange","font_size":"14","text_align":"left","vertical_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":3,"width":3,"height":3}},{"id":1799396264317844,"definition":{"title":"CPU Credit Consumption","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Credit Balance","formula":"query1"},{"alias":"Credits Consumed","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"sum:aws.ec2.cpucredit_balance{$service,$instance_id,$instance_type,$image_id,$region,$autoscaling_group,$scope,$host}","data_source":"metrics","name":"query1"},{"query":"sum:aws.ec2.cpucredit_usage{$service,$instance_id,$instance_type,$image_id,$region,$autoscaling_group,$scope,$host}","data_source":"metrics","name":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":3,"width":5,"height":3}},{"id":3647539440246016,"definition":{"title":"Surplus Credit Consumption","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Surplus Credit Balance","formula":"query1"},{"alias":"Surplus Credits Consumed","formula":"query2"}],"response_format":"timeseries","queries":[{"query":"sum:aws.ec2.cpusurplus_credit_balance{$service,$instance_id,$instance_type,$image_id,$region,$autoscaling_group,$scope,$host}","data_source":"metrics","name":"query1"},{"query":"sum:aws.ec2.cpusurplus_credits_charged{$service,$instance_id,$instance_type,$image_id,$region,$autoscaling_group,$scope,$host}","data_source":"metrics","name":"query2"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":8,"y":3,"width":4,"height":3}}]},"layout":{"x":0,"y":21,"width":12,"height":7}},{"id":2602400150279726,"definition":{"title":"Network","background_color":"vivid_yellow","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":602552310019958,"definition":{"type":"note","content":"\nThese metrics report the network throughput, in bytes, of your instances. Drops or fluctuations can be correlated with other application-level metrics to pinpoint possible issues.\n\nIf certain instances are receiving considerably more network traffic than others, you may wish to use a load balancer to distribute traffic more evenly.","background_color":"yellow","font_size":"14","text_align":"left","vertical_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":0,"width":3,"height":4}},{"id":7755909043463084,"definition":{"title":"Network In by Instance Type","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"response_format":"timeseries","queries":[{"query":"avg:aws.ec2.network_in{$instance_id,$instance_type,$image_id,$autoscaling_group,$region,$scope,$service,$host} by {instance-type}","data_source":"metrics","name":"query1"}],"style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":3,"y":0,"width":5,"height":3}},{"id":1360387173410916,"definition":{"title":"Network In","title_size":"13","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Average Bytes","limit":{"count":500,"order":"desc"},"formula":"query1"}],"response_format":"scalar","queries":[{"query":"avg:aws.ec2.network_in{$image_id,$scope,$region,$autoscaling_group,$instance_type,$instance_id,$service,$host} by {instance_id}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":0,"width":4,"height":3}},{"id":798350065596464,"definition":{"title":"Network Out by Instance Type","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 10, 'mean', 'desc')"}],"response_format":"timeseries","queries":[{"query":"avg:aws.ec2.network_out{$image_id,$scope,$region,$autoscaling_group,$instance_type,$instance_id,$service,$host} by {instance-type}","data_source":"metrics","name":"query1"}],"style":{"palette":"red","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":3,"y":3,"width":5,"height":3}},{"id":4527524803376124,"definition":{"title":"Network Out","title_size":"13","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Average Bytes","limit":{"count":500,"order":"desc"},"formula":"query1"}],"response_format":"scalar","queries":[{"query":"avg:aws.ec2.network_out{$image_id,$scope,$region,$autoscaling_group,$instance_type,$instance_id,$service,$host} by {instance_id}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":3,"width":4,"height":3}},{"id":6821338331401118,"definition":{"title":"Total Network In","title_size":"13","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.ec2.network_in{$image_id,$scope,$region,$autoscaling_group,$instance_type,$instance_id,$service,$host}","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"autoscale":true,"precision":2},"layout":{"x":0,"y":4,"width":3,"height":1}},{"id":2724241497375432,"definition":{"title":"Total Network Out","title_size":"13","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.ec2.network_out{$image_id,$scope,$region,$autoscaling_group,$instance_type,$instance_id,$service,$host}","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"autoscale":true,"precision":2},"layout":{"x":0,"y":5,"width":3,"height":1}}]},"layout":{"x":0,"y":28,"width":12,"height":7,"is_column_break":true}},{"id":3218228010526868,"definition":{"title":"I/O","background_color":"vivid_orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8113155050172662,"definition":{"type":"note","content":"This metric pair can help determine if degraded performance is the result of consistently high IOPS, causing bottlenecks as disk requests become queued. If your instance volumes are HDD, you can consider a move to faster SSDs. Or you can upgrade the VM to an instance with more volumes attached to it.\n\nMonitoring the amount of data being written to and read from disk can help reveal application-level problems. Too much data being read from disk might indicate that your application would benefit from adding a caching layer. Prolonged higher-than-anticipated disk read or write levels could also mean request queuing and slowdowns if your disk speed is not fast enough to match your use case.","background_color":"orange","font_size":"14","text_align":"left","vertical_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":0,"width":3,"height":6}},{"id":7039203707836940,"definition":{"title":"Disk Reads by Instance Type","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 5, 'mean', 'desc')"}],"response_format":"timeseries","queries":[{"query":"avg:aws.ec2.disk_read_bytes{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {instance-type}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":3,"y":0,"width":5,"height":3}},{"id":7196831557446260,"definition":{"title":"Bytes Read","title_size":"13","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Average Rate","limit":{"count":500,"order":"desc"},"formula":"query1"}],"response_format":"scalar","queries":[{"query":"avg:aws.ec2.disk_read_bytes{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {instance_id}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":0,"width":4,"height":3}},{"id":7770875801336088,"definition":{"title":"Disk Writes by Instance Type","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 5, 'mean', 'desc')"}],"response_format":"timeseries","queries":[{"query":"avg:aws.ec2.disk_write_bytes{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {instance-type}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":3,"y":3,"width":5,"height":3}},{"id":929772352936484,"definition":{"title":"Bytes Written","title_size":"13","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Average Rate","limit":{"count":500,"order":"desc"},"formula":"query1"}],"response_format":"scalar","queries":[{"query":"avg:aws.ec2.disk_write_bytes{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {host}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":3,"width":4,"height":3}},{"id":730181220907330,"definition":{"type":"note","content":"\nUnlike the instance store volume metrics above, EBS volumes provide persistent storage. \n\nEBS volumes are virtualized, networked drives; they are not physical disks attached to an instance’s host computer. Disk performance is thus tightly linked to network performance and throughput. ","background_color":"orange","font_size":"14","text_align":"left","vertical_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":6,"width":3,"height":6}},{"id":1719093456204288,"definition":{"title":"EBS Reads by Instance Type","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 5, 'mean', 'desc')"}],"response_format":"timeseries","queries":[{"query":"sum:aws.ec2.ebsread_bytes{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {instance-type}","data_source":"metrics","name":"query1"}],"style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":3,"y":6,"width":5,"height":3}},{"id":916869761076378,"definition":{"title":"EBS Read Ops","title_size":"13","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Average Operations","limit":{"count":500,"order":"desc"},"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.ec2.ebsread_ops{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {instance_id}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":6,"width":4,"height":3}},{"id":2693491232015632,"definition":{"title":"EBS Writes by Instance Type","title_size":"13","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"top(query1, 5, 'mean', 'desc')"}],"response_format":"timeseries","queries":[{"query":"sum:aws.ec2.ebswrite_bytes{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {instance-type}","data_source":"metrics","name":"query1"}],"style":{"palette":"blue","line_type":"solid","line_width":"normal"},"display_type":"line"}],"custom_links":[]},"layout":{"x":3,"y":9,"width":5,"height":3}},{"id":3680213921246666,"definition":{"title":"EBS Write Ops","title_size":"13","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Average Operations","limit":{"count":500,"order":"desc"},"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.ec2.ebsread_ops{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host} by {instance_id}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":8,"y":9,"width":4,"height":3}}]},"layout":{"x":0,"y":35,"width":12,"height":13}},{"id":2299657538305614,"definition":{"title":"AutoScaling","background_color":"vivid_yellow","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2668076450306446,"definition":{"type":"note","content":"With dynamic scaling, AWS Auto Scaling will spin up and shut down EC2 instances based on the value of a metric of your choice. To determine the best metric for your instances, you can graph, compare, and correlate resource metrics across your Auto Scaling groups.\n\nAuto Scaling periodically checks the health of your instances, and relaunches any unhealthy instances as needed, in order to maintain each group’s minimum size. In Datadog, you can set alerts to gauge the health of your Auto Scaling groups and determine if they respond appropriately when the demand on your fleet changes.","background_color":"yellow","font_size":"14","text_align":"left","vertical_align":"center","show_tick":true,"tick_pos":"50%","tick_edge":"right","has_padding":true},"layout":{"x":0,"y":0,"width":3,"height":5}},{"id":1911573507975162,"definition":{"title":"Active EC2 Instances","title_size":"13","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Active Instances","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:aws.ec2.host_ok{$scope,$region,$autoscaling_group,$image_id,$instance_type,$instance_id,$service,$host}","data_source":"metrics","name":"query1"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":3,"y":0,"width":5,"height":3}},{"id":4364455346947192,"definition":{"title":"Ratio of Active Instances to Desired Capacity","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query2 / query1 * 100"}],"response_format":"scalar","queries":[{"query":"avg:aws.autoscaling.group_desired_capacity{$instance_id,$instance_type,$image_id,$autoscaling_group,$region,$scope,$service,$host}","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"avg:aws.autoscaling.group_in_service_instances{$instance_id,$instance_type,$image_id,$autoscaling_group,$region,$scope,$service,$host}","data_source":"metrics","name":"query2","aggregator":"avg"}]}],"autoscale":false,"custom_unit":"%","precision":2},"layout":{"x":8,"y":0,"width":4,"height":1}},{"id":1409661838241856,"definition":{"title":"AutoScale Events","title_size":"16","title_align":"left","requests":[{"query":{"query_string":"source:amazon_auto_scaling $instance_id $instance_type $image_id $autoscaling_group $region $scope $service $host","data_source":"event_stream","event_size":"s"},"columns":[],"response_format":"event_list"}],"type":"list_stream"},"layout":{"x":8,"y":1,"width":4,"height":6}},{"id":3483685108407302,"definition":{"title":"Failed Instances","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Autoscaling Group","limit":{"count":500,"order":"desc"},"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.ec2.status_check_failed{$instance_id,$instance_type,$image_id,$autoscaling_group,$region,$scope,$service,$host} by {autoscaling_group}","data_source":"metrics","name":"query1","aggregator":"sum"}]}]},"layout":{"x":3,"y":3,"width":5,"height":2}},{"id":3691112797466532,"definition":{"title":"Min Amount of Instances","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.autoscaling.group_min_size.minimum{$autoscaling_group,$scope,$region,$image_id,$instance_type,$instance_id,$service,$host}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"text_align":"center","custom_links":[],"precision":2},"layout":{"x":0,"y":5,"width":3,"height":1}},{"id":7548431963528668,"definition":{"title":"Most Instances","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"Average Instances","limit":{"count":50,"order":"desc"},"formula":"query1"}],"response_format":"scalar","queries":[{"query":"avg:aws.autoscaling.group_total_instances{$instance_id,$instance_type,$image_id,$autoscaling_group,$region,$scope,$service,$host} by {autoscaling_group}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":3,"y":5,"width":5,"height":2}},{"id":3558953197997554,"definition":{"title":"Total Instances","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:aws.autoscaling.group_max_size.maximum{$autoscaling_group,$scope,$region,$image_id,$instance_type,$instance_id,$service,$host}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"text_align":"center","custom_links":[],"precision":2},"layout":{"x":0,"y":6,"width":3,"height":1}}]},"layout":{"x":0,"y":48,"width":12,"height":8}}],"template_variables":[{"name":"scope","prefix":"scope","available_values":[],"default":"*"},{"name":"region","prefix":"region","available_values":[],"default":"*"},{"name":"autoscaling_group","prefix":"autoscaling_group","available_values":[],"default":"*"},{"name":"image_id","prefix":"image","available_values":[],"default":"*"},{"name":"instance_type","prefix":"instance_type","available_values":[],"default":"*"},{"name":"instance_id","prefix":"instance_id","available_values":[],"default":"*"},{"name":"service","prefix":"service","available_values":[],"default":"*"},{"name":"host","prefix":"host","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}