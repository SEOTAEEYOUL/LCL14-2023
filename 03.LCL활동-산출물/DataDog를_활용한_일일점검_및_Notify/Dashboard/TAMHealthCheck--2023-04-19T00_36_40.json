{"title":"TAM Health Check","description":null,"widgets":[{"id":7203776350706180,"definition":{"title":"인프라스트럭쳐 (infrastructure)","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3439131630607734,"definition":{"title":"에이전트가 설치된 호스트","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.agent.running{*}","aggregator":"last"},{"name":"query2","data_source":"metrics","query":"sum:datadog.estimated_usage.hosts{*}","aggregator":"last"}],"conditional_formats":[{"comparator":">=","value":90,"palette":"white_on_green"},{"comparator":">=","value":80,"palette":"black_on_light_yellow"},{"comparator":"<","value":80,"palette":"black_on_light_red"}],"formulas":[{"formula":"query1 / query2 * 100"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"yaxis":{"include_zero":false},"type":"bars"}},"layout":{"x":0,"y":0,"width":4,"height":2}},{"id":472097177609784,"definition":{"title":"실행 호스트","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query2","data_source":"metrics","query":"sum:datadog.estimated_usage.hosts{*}","aggregator":"last"}],"formulas":[{"formula":"query2"}]}],"autoscale":true,"custom_unit":"","precision":2},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":4559121920662672,"definition":{"title":"Agent running 호스트","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.agent.running{*}","aggregator":"last"}],"formulas":[{"formula":"query1"}]}],"autoscale":true,"custom_unit":"","precision":2},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":8732220269614308,"definition":{"title":"호스트 사용 현황","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"3mo"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query2","data_source":"metrics","query":"sum:datadog.estimated_usage.hosts{*}"}],"formulas":[{"formula":"query2"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":0,"y":2,"width":6,"height":3}},{"id":1582430485218150,"definition":{"title":"에이전트 버젼","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:datadog.trace_agent.heartbeat{*,*,*} by {version}","aggregator":"avg"}],"formulas":[{"formula":"query1"}],"style":{"palette":"classic"}}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":6,"y":2,"width":6,"height":3}},{"id":6110841246707844,"definition":{"title":"env 태그가 포함된 에이전트","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"avg:datadog.agent.running{env:*}","aggregator":"avg"},{"name":"query2","data_source":"metrics","query":"avg:datadog.agent.running{*}","aggregator":"avg"}],"conditional_formats":[{"comparator":">=","value":90,"palette":"black_on_light_green"},{"comparator":">=","value":80,"palette":"black_on_light_yellow"},{"comparator":"<","value":80,"palette":"black_on_light_red"}],"formulas":[{"formula":"query1 / query2 * 100"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":0,"y":5,"width":3,"height":2}},{"id":155531081466544,"definition":{"title":"클라우드 통합 에이전트 (Agent with Cloud Intergration)","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"avg:datadog.agent.running{availability-zone:*}","aggregator":"avg"},{"name":"query2","data_source":"metrics","query":"avg:datadog.agent.running{*}","aggregator":"avg"}],"conditional_formats":[{"comparator":">=","value":90,"palette":"black_on_light_green"},{"comparator":">=","value":80,"palette":"black_on_light_yellow"},{"comparator":"<","value":80,"palette":"black_on_light_red"}],"formulas":[{"formula":"query1 / query2 * 100"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":3,"y":5,"width":3,"height":2}}]},"layout":{"x":0,"y":0,"width":12,"height":8}},{"id":2082954347186198,"definition":{"title":"쿠버네테스 (kubernetes)","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6663918420025222,"definition":{"title":"env, service, version tag가 있는 K8s 컨테이너","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes.containers.running{env:*,service:*,version:*,!short_image:agent}","aggregator":"sum"},{"name":"query2","data_source":"metrics","query":"sum:kubernetes.containers.running{!short_image:agent}","aggregator":"sum"}],"conditional_formats":[{"comparator":">=","value":90,"palette":"black_on_light_green"},{"comparator":">=","value":80,"palette":"black_on_light_yellow"},{"comparator":"<","value":70,"palette":"black_on_light_red"}],"formulas":[{"formula":"query1 / query2 * 100"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":0,"y":0,"width":4,"height":4}},{"id":5367249817411488,"definition":{"title":"전체 컨테이너","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes.containers.running{!short_image:agent}","aggregator":"sum"}],"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}]}]},"layout":{"x":4,"y":0,"width":2,"height":2}},{"id":1460340070236156,"definition":{"title":"env, service, version tag가 있는 K8 컨테이너","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"cell_display_mode":"number","alias":"tag 있는 컨테이너","formula":"query1","limit":{"count":500,"order":"desc"}}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes.containers.running{!short_image:agent} by {kube_container_name,env,service,version}","aggregator":"sum"}]}]},"layout":{"x":6,"y":0,"width":6,"height":4}},{"id":6573976619940160,"definition":{"title":"Tag있는 컨테이너","title_size":"16","title_align":"left","type":"toplist","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes.containers.running{!short_image:agent,env:*,service:*,version:*}","aggregator":"sum"}],"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}]}]},"layout":{"x":4,"y":2,"width":2,"height":2}},{"id":5934439136911620,"definition":{"title":"클러스터별 CPU 및 메모리","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"CPU request","formula":"query1","limit":{"count":500,"order":"desc"}},{"alias":"Memory request","formula":"query2"},{"conditional_formats":[{"comparator":"<","palette":"white_on_red","value":60}],"alias":"CPU 사용량","formula":"query3"},{"conditional_formats":[{"comparator":"<","palette":"white_on_red","value":60}],"alias":"memory 사용량","formula":"query4"},{"alias":"CPU usage / request","formula":"query3 / (query1 * 1000000000) * 100","conditional_formats":[]},{"alias":"MEM usage / request","formula":"query4 / query2 * 100"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes.cpu.requests{*,*} by {kube_cluster_name,env}","aggregator":"avg"},{"name":"query2","data_source":"metrics","query":"sum:kubernetes.memory.requests{*,*,*,*} by {kube_cluster_name,env}","aggregator":"avg"},{"name":"query3","data_source":"metrics","query":"sum:kubernetes.cpu.usage.total{*,*,*,*} by {kube_cluster_name,env}","aggregator":"avg"},{"name":"query4","data_source":"metrics","query":"sum:kubernetes.memory.usage{*,*,*,*} by {kube_cluster_name,env}","aggregator":"avg"}]}],"has_search_bar":"auto"},"layout":{"x":0,"y":4,"width":12,"height":2}},{"id":8042283709932614,"definition":{"title":"k8s 객체별 CPU 및 메모리","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"CPU request","conditional_formats":[],"formula":"query1","limit":{"count":500,"order":"desc"}},{"alias":"Memory request","formula":"query2"},{"alias":"CPU Usage","formula":"query3 / 1000000000"},{"alias":"CPU usage / request","style":{"palette":"cool"},"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":40},{"comparator":">","palette":"red_on_white","value":60},{"comparator":">","palette":"red_on_white","value":70}],"formula":"query3 / (query1 * 1000000000) * 100"},{"alias":"Memory Usage","formula":"(query4 / 1024 / 1024) * 1000000"},{"alias":"MEM usage / request","style":{"palette":"purple"},"conditional_formats":[{"comparator":"<","palette":"white_on_green","value":40},{"comparator":">","palette":"yellow_on_white","value":70},{"comparator":">","palette":"red_on_white","value":80}],"formula":"query4 / query2 * 100"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:kubernetes.cpu.requests{*,*,*,*} by {kube_cluster_name,env,kube_deployment,kube_daemon_set}","aggregator":"last"},{"name":"query2","data_source":"metrics","query":"sum:kubernetes.memory.requests{*,*,*,*} by {kube_cluster_name,env,kube_deployment,kube_daemon_set}","aggregator":"last"},{"name":"query3","data_source":"metrics","query":"sum:kubernetes.cpu.usage.total{*,*,*,*} by {kube_cluster_name,env,kube_deployment,kube_daemon_set}","aggregator":"last"},{"name":"query4","data_source":"metrics","query":"sum:kubernetes.memory.usage{*,*,*,*} by {kube_cluster_name,env,kube_deployment,kube_daemon_set}","aggregator":"last"}]}],"has_search_bar":"never"},"layout":{"x":0,"y":6,"width":12,"height":4}}]},"layout":{"x":0,"y":8,"width":12,"height":11}},{"id":2244084483365076,"definition":{"title":"어플리케이션 성능 모니터 (APM)","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":7613067604207524,"definition":{"title":"APM host","time":{"live_span":"1h"},"type":"query_value","requests":[{"formulas":[{"formula":"count_nonzero(query1)"}],"response_format":"scalar","queries":[{"query":"avg:datadog.apm.host_instance{*,*,*} by {host}.rollup(count, 3600)","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"autoscale":false,"precision":0,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":7863611121507924,"definition":{"title":"APM host vs. last month","time":{"live_span":"1h"},"type":"query_value","requests":[{"formulas":[{"formula":"count_nonzero(month_before(query1))"}],"response_format":"scalar","queries":[{"query":"avg:datadog.apm.host_instance{*,*,*} by {host}.rollup(count, 3600)","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"autoscale":false,"precision":0},"layout":{"x":3,"y":0,"width":3,"height":2}},{"id":2442224393331426,"definition":{"title":"APM host trend","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"3mo"},"type":"timeseries","requests":[{"formulas":[{"formula":"count_nonzero(query1)"}],"queries":[{"query":"avg:datadog.apm.host_instance{*,*,*} by {host}","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":false}},"layout":{"x":6,"y":0,"width":6,"height":2}},{"id":1277616602847352,"definition":{"title":"Ingested bytes","type":"query_value","requests":[{"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.apm.ingested_bytes{*,*,*}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":0,"y":2,"width":2,"height":2}},{"id":7101228098052068,"definition":{"title":"Ingested bytes","show_legend":false,"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"sum:datadog.estimated_usage.apm.ingested_bytes{*,*,*}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":2,"y":2,"width":4,"height":2}},{"id":4646557030013022,"definition":{"title":"Indexed spans","type":"query_value","requests":[{"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.apm.indexed_spans{*,*,*}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"autoscale":true,"custom_unit":"spans","precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":6,"y":2,"width":2,"height":2}},{"id":4874169542081920,"definition":{"title":"Indexed spans","show_legend":false,"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"sum:datadog.estimated_usage.apm.indexed_spans{*,*,*}.as_count()","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":5492362252682580,"definition":{"title":"서비스별 ingestion volume","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.apm.ingested_bytes{*,*,*} by {env,service}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":0,"y":4,"width":5,"height":4}},{"id":7184448483845010,"definition":{"title":"서비스별 indexing volume ","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.apm.indexed_spans{*,*,*} by {env,service}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":5,"y":4,"width":5,"height":4}},{"id":3203139527638820,"definition":{"title":"Traced Lambda invocations","title_size":"16","title_align":"left","time":{"live_span":"1mo"},"type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.serverless.traced_invocations{*,*,*}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"autoscale":true,"precision":2},"layout":{"x":0,"y":8,"width":3,"height":2}},{"id":505553752967230,"definition":{"title":"Traced Lambda invocations over time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"formulas":[{"alias":"Traced lambda invocations","formula":"query1"}],"queries":[{"query":"sum:datadog.serverless.traced_invocations{*,*,*}.as_count()","data_source":"metrics","name":"query1"}],"response_format":"timeseries","style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":3,"y":8,"width":9,"height":4}},{"id":571602646455818,"definition":{"title":"vs. last month","title_size":"16","title_align":"left","time":{"live_span":"1mo"},"type":"query_value","requests":[{"formulas":[{"formula":"month_before(query1)"}],"response_format":"scalar","queries":[{"query":"sum:datadog.serverless.traced_invocations{*,*,*}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"autoscale":true,"precision":2},"layout":{"x":0,"y":10,"width":3,"height":2}},{"id":4713222327317142,"definition":{"title":"env 및 version tag 가 있는 서비스 스팬","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"span","formula":"query1","limit":{"count":50,"order":"desc"}},{"alias":"env, version 태그있는 span 비율","formula":"query2 / query1 * 100"}],"queries":[{"data_source":"spans","name":"query1","search":{"query":"@_top_level:1"},"indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"service","limit":50,"sort":{"aggregation":"count","order":"desc"}}]},{"data_source":"spans","name":"query2","search":{"query":"@_top_level:1 env:* version:*"},"indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"service","limit":50,"sort":{"aggregation":"count","order":"desc"}}]}]}],"has_search_bar":"never"},"layout":{"x":0,"y":12,"width":5,"height":4}},{"id":4154041943508542,"definition":{"title":"모니터 설정되지 않은 서비스","title_size":"16","title_align":"left","type":"query_table","requests":[{"queries":[{"data_source":"events","name":"query2","search":{"query":"service:* env:* source:alert"},"indexes":["*"],"compute":{"aggregation":"cardinality","metric":"service"},"group_by":[{"facet":"service","limit":1000,"sort":{"aggregation":"cardinality","order":"desc","metric":"service"}}]},{"data_source":"metrics","name":"query1","query":"sum:datadog.estimated_usage.apm.ingested_bytes{*} by {service}.as_count()","aggregator":"avg"}],"formulas":[{"conditional_formats":[{"comparator":"<=","palette":"black_on_light_red","value":0}],"cell_display_mode":"bar","alias":"알람 설정 서비스","formula":"default_zero(query2)"},{"conditional_formats":[{"comparator":"<=","palette":"black_on_light_red","value":0}],"cell_display_mode":"bar","alias":"Ingested","formula":"default_zero(query1)","limit":{"count":500,"order":"desc"}}],"response_format":"scalar"}],"has_search_bar":"never"},"layout":{"x":5,"y":12,"width":4,"height":4}},{"id":5845967581166850,"definition":{"title":"모니터 APM Error","type":"manage_status","display_format":"countsAndList","color_preference":"text","hide_zero_counts":true,"query":"type:error-tracking","sort":"status,asc","count":50,"start":0,"summary_type":"monitors","show_priority":false,"show_last_triggered":false},"layout":{"x":9,"y":12,"width":3,"height":4}}]},"layout":{"x":0,"y":19,"width":12,"height":17}},{"id":7045930235017336,"definition":{"title":"로그 (Log)","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6092144475655684,"definition":{"title":"Ingested bytes(1day)","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_value","requests":[{"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.logs.ingested_bytes{*,*}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"autoscale":true,"precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":0,"y":0,"width":3,"height":2}},{"id":5974812947254870,"definition":{"title":"Indexed logs(1day)","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_value","requests":[{"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.logs.ingested_events{datadog_index:*,datadog_is_excluded:false,*,*}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"autoscale":true,"custom_unit":"indexed","precision":2},"layout":{"x":3,"y":0,"width":3,"height":2}},{"id":8209896577105000,"definition":{"title":"Overall Exclusion Ratio","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:datadog.estimated_usage.logs.ingested_events{datadog_is_excluded:true,*,*}.as_count()","aggregator":"avg"},{"data_source":"metrics","name":"query2","query":"sum:datadog.estimated_usage.logs.ingested_events{*,*}.as_count()","aggregator":"avg"}],"formulas":[{"formula":"query1 / query2 * 100"}],"conditional_formats":[{"comparator":">","value":30,"palette":"black_on_light_green"},{"comparator":">=","value":1,"palette":"black_on_light_yellow"},{"comparator":"<","value":1,"palette":"black_on_light_red"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"type":"bars","yaxis":{}}},"layout":{"x":6,"y":0,"width":3,"height":2}},{"id":508599726227788,"definition":{"title":"서비스별 ingested bytes","title_size":"16","title_align":"left","time":{"live_span":"1d"},"requests":[{"formulas":[{"formula":"query1","limit":{"count":50,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.logs.ingested_bytes{*,*} by {service}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":0,"y":2,"width":3,"height":4}},{"id":6293336512272410,"definition":{"title":"서비스별 indexed logs","title_size":"16","title_align":"left","time":{"live_span":"1d"},"requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.logs.ingested_events{*,*,datadog_index:*,datadog_is_excluded:false} by {service}.as_count()","data_source":"metrics","name":"query1","aggregator":"sum"}]}],"type":"sunburst"},"layout":{"x":3,"y":2,"width":3,"height":4}},{"id":7107313427133528,"definition":{"title":"전체 수집된 바이트 (Ingested bytes)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"1mo"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.logs.ingested_bytes{*}.as_count()"}],"formulas":[{"formula":"query1"}],"style":{"palette":"cool"},"display_type":"bars"}]},"layout":{"x":6,"y":2,"width":6,"height":4}},{"id":6128719828088722,"definition":{"title":"인덱스별 수집된 바이트 (Ingested bytes by index)","title_size":"16","title_align":"left","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.logs.ingested_bytes{*} by {datadog_index}.as_count()","aggregator":"sum"}],"formulas":[{"formula":"query1"}],"style":{"palette":"datadog16"}}],"type":"sunburst","hide_total":false,"legend":{"type":"table"}},"layout":{"x":0,"y":6,"width":6,"height":3}},{"id":4063565163052718,"definition":{"title":"","title_size":"16","title_align":"left","requests":[{"formulas":[{"formula":"a","limit":{"count":10,"order":"desc"}}],"queries":[{"data_source":"logs","name":"a","search":{"query":""},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"aggregation":"count","order":"desc"},"should_exclude_missing":true}],"storage":"hot"}],"response_format":"scalar"}],"type":"sunburst","legend":{"type":"table"}},"layout":{"x":6,"y":6,"width":6,"height":3}},{"id":7252460023127880,"definition":{"title":"로그 상태 코드 현황","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"전체 log량","formula":"query1","limit":{"count":500,"order":"desc"}},{"alias":"Info 로그","formula":"query2"},{"alias":"상태코드는 error인데 Info 로 보이는 로그","formula":"query3"},{"alias":"Error 로그","formula":"query4"},{"alias":"상태코드는 error인데 Info 로 보이는 로그","formula":"query5"},{"alias":"debug 로그","formula":"query6"},{"alias":"debug 비율(%)","conditional_formats":[{"comparator":">","palette":"white_on_red","value":50}],"formula":"query6 / query1 * 100"}],"queries":[{"data_source":"logs","name":"query1","search":{"query":""},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"},{"data_source":"logs","name":"query2","search":{"query":"status:info"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"},{"data_source":"logs","name":"query3","search":{"query":"status:info error"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"},{"data_source":"logs","name":"query4","search":{"query":"status:error"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"},{"data_source":"logs","name":"query5","search":{"query":"status:error info"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"},{"data_source":"logs","name":"query6","search":{"query":"status:debug"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"}]}]},"layout":{"x":0,"y":9,"width":12,"height":2}},{"id":5762861337579220,"definition":{"title":"Pipeline처리 건수","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"전체 log수","formula":"a"},{"alias":"처리않되는 log수","formula":"b"}],"queries":[{"data_source":"logs","name":"a","search":{"query":""},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"},{"data_source":"logs","name":"b","search":{"query":"datadog.pipelines:false"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"}],"response_format":"scalar"}]},"layout":{"x":0,"y":11,"width":4,"height":2}},{"id":8428054479189106,"definition":{"title":"서비스별 pipeline처리 확인","title_size":"16","title_align":"left","type":"query_table","requests":[{"formulas":[{"alias":"전체 log수","formula":"a"},{"alias":"처리되지 않는 log수","formula":"b"},{"alias":"처리되지 않는 비율(%)","formula":"b / a * 100"}],"queries":[{"data_source":"logs","name":"a","search":{"query":""},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"service","limit":10,"sort":{"aggregation":"count","order":"desc"},"should_exclude_missing":true}],"storage":"hot"},{"data_source":"logs","name":"b","search":{"query":"datadog.pipelines:false"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"service","limit":10,"sort":{"aggregation":"count","order":"desc"},"should_exclude_missing":true}],"storage":"hot"}],"response_format":"scalar"}]},"layout":{"x":4,"y":11,"width":8,"height":4}},{"id":3406188263782388,"definition":{"title":"파이프라인을 통과하는 인덱싱된 로그","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"logs","name":"query1","search":{"query":""},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"},{"data_source":"logs","name":"query2","search":{"query":"datadog.pipelines:false"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"}],"formulas":[{"formula":"(query1 - query2) / query1 * 100"}],"conditional_formats":[{"comparator":">=","value":90,"palette":"black_on_light_green"},{"comparator":">=","value":80,"palette":"black_on_light_yellow"},{"comparator":"<","value":80,"palette":"black_on_light_red"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"yaxis":{},"type":"bars"}},"layout":{"x":0,"y":13,"width":4,"height":2}},{"id":6913536717206238,"definition":{"title":"멀티라인 인덱스 로그 (예상치)","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"전체 log","formula":"query1"},{"alias":"정상 로그","formula":"query2"},{"alias":"멀티라인 의심 비율(%)","formula":"(query1 - query2) / query1 * 100","limit":{"count":500,"order":"desc"}}],"queries":[{"data_source":"logs","name":"query1","search":{"query":""},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"},{"data_source":"logs","name":"query2","search":{"query":"message:\"^202?\""},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"}]}]},"layout":{"x":0,"y":15,"width":4,"height":2}},{"id":1052421036517616,"definition":{"title":"멀티라인 의심 로그","title_size":"16","title_align":"left","time":{"live_span":"1h"},"requests":[{"response_format":"event_list","query":{"data_source":"logs_pattern_stream","query_string":"","indexes":[],"group_by":[{"facet":"service"}]},"columns":[{"field":"status_line","width":"auto"},{"field":"matches","width":"auto"},{"field":"volume","width":"auto"},{"field":"service","width":"auto"},{"field":"message","width":"auto"}]}],"type":"list_stream"},"layout":{"x":4,"y":15,"width":8,"height":4}},{"id":4848432699024372,"definition":{"title":"멀티라인 인덱스 로그 (예상 비율)","title_size":"16","title_align":"left","time":{"live_span":"1d"},"type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"logs","name":"query1","search":{"query":""},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"},{"data_source":"logs","name":"query2","search":{"query":"message:\"^202?\""},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"}],"formulas":[{"formula":"(query1 - query2) / query1 * 100"}],"conditional_formats":[{"comparator":">=","value":90,"palette":"black_on_light_green"},{"comparator":">=","value":80,"palette":"black_on_light_yellow"},{"comparator":"<","value":80,"palette":"black_on_light_red"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"yaxis":{},"type":"bars"}},"layout":{"x":0,"y":17,"width":4,"height":2}},{"id":2467288576681542,"definition":{"title":"전체 수집된 바이트 (Ingested bytes)","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"3mo"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.logs.ingested_bytes{*}.as_count()"}],"response_format":"timeseries","style":{"palette":"cool"},"display_type":"bars"}]},"layout":{"x":0,"y":19,"width":6,"height":4}},{"id":6603436926421656,"definition":{"title":"Indexed Log","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"3mo"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.logs.ingested_events{*}.as_count()"}],"response_format":"timeseries","style":{"palette":"cool"},"display_type":"bars"}]},"layout":{"x":6,"y":19,"width":6,"height":4}}]},"layout":{"x":0,"y":36,"width":12,"height":24,"is_column_break":true}},{"id":1039517240727086,"definition":{"title":"모니터 (Monitor)","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":281030727953298,"definition":{"title":"전체 모니터","type":"manage_status","display_format":"counts","color_preference":"text","hide_zero_counts":true,"query":"","sort":"status,asc","count":50,"start":0,"summary_type":"monitors","show_priority":false,"show_last_triggered":true},"layout":{"x":0,"y":0,"width":12,"height":2}},{"id":4049697830344754,"definition":{"title":"15일 이상 음소거된 모니터","type":"manage_status","display_format":"countsAndList","color_preference":"text","hide_zero_counts":true,"query":"muted_elapsed:15d","sort":"name,asc","count":50,"start":0,"summary_type":"monitors","show_priority":false,"show_last_triggered":false},"layout":{"x":0,"y":2,"width":6,"height":4}},{"id":3817589947570118,"definition":{"title":"지난 주에 15회 이상 트리거된 모니터","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"alert","conditional_formats":[{"comparator":">","palette":"white_on_yellow","value":15}],"formula":"query1","limit":{"count":10,"order":"desc"}}],"queries":[{"data_source":"events","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@evt.name","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert status:error"}}]}]},"layout":{"x":6,"y":2,"width":6,"height":4}},{"id":6841431466796214,"definition":{"title":"알림이 가장 많은 알림 모니터링","title_size":"16","title_align":"left","type":"query_table","requests":[{"response_format":"scalar","formulas":[{"alias":"alert","formula":"query1","limit":{"count":10,"order":"desc"},"cell_display_mode":"bar"}],"queries":[{"data_source":"events","name":"query1","search":{"query":"source:alert status:error"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@monitor_notifications","limit":10,"sort":{"aggregation":"count","order":"desc"}}]}]}]},"layout":{"x":0,"y":6,"width":12,"height":2}},{"id":2106583375343408,"definition":{"title":"1주일 미만 경고(Alert) 상태 모니터","type":"manage_status","display_format":"countsAndList","color_preference":"text","hide_zero_counts":false,"query":"triggered:10080","sort":"status,asc","count":50,"start":0,"summary_type":"groups","show_priority":false,"show_last_triggered":true},"layout":{"x":0,"y":8,"width":6,"height":4}},{"id":1546195662105234,"definition":{"title":"env, service 로 필터링된 모니터수 ","type":"manage_status","display_format":"countsAndList","color_preference":"text","hide_zero_counts":false,"query":"env:* service:*","sort":"triggered,desc","count":50,"start":0,"summary_type":"monitors","show_priority":false,"show_last_triggered":true},"layout":{"x":6,"y":8,"width":6,"height":4}}]},"layout":{"x":0,"y":60,"width":12,"height":13}},{"id":1021291977349962,"definition":{"title":"커스텀 매트릭 (Custome Metric)","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":577551401868378,"definition":{"title":"카디널리티가 높은 메트릭","title_size":"16","title_align":"left","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}","aggregator":"avg"},{"name":"query2","data_source":"metrics","query":"sum:datadog.estimated_usage.metrics.custom{*}","aggregator":"avg"}],"formulas":[{"formula":"query1 / query2 * 100","alias":"%total volume"}]}],"type":"sunburst"},"layout":{"x":0,"y":0,"width":12,"height":4}}]},"layout":{"x":0,"y":73,"width":12,"height":5}},{"id":7948238754825274,"definition":{"title":"RUM (Real User Monitoring)","background_color":"vivid_blue","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":8474039791042678,"definition":{"title":"APM에 연결된 RUM 리소스","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"rum","name":"query1","search":{"query":"@_dd.trace_id:* @type:resource"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[]},{"data_source":"rum","name":"query2","search":{"query":"@type:resource"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[]}],"conditional_formats":[{"comparator":"<","value":2,"palette":"black_on_light_yellow"}],"formulas":[{"formula":"query1 / query2 * 100"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"yaxis":{},"type":"bars"}},"layout":{"x":0,"y":0,"width":6,"height":4}},{"id":6844985922450316,"definition":{"title":"비지니스 정보로 세션정보 강화  (Enrich sessions with business information)","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"rum","name":"query1","search":{"query":"@type:session @usr.id:*"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[]},{"data_source":"rum","name":"query2","search":{"query":"@type:session"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[]}],"conditional_formats":[{"comparator":">","value":75,"palette":"black_on_light_green"},{"comparator":"<=","value":75,"palette":"black_on_light_yellow"}],"formulas":[{"formula":"query1 / query2 * 100"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"yaxis":{},"type":"bars"}},"layout":{"x":6,"y":0,"width":6,"height":4}}]},"layout":{"x":0,"y":78,"width":12,"height":5}}],"template_variables":[],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}