{"title":"Kubernetes - EKS monitoring Dashboard","description":"Our Kubernetes dashboard gives you broad visibility into the scale, status, and resource usage of your cluster and its containers. \n\nFurther reading for Kubernetes monitoring:\n\n- [Autoscale Kubernetes workloads with any Datadog metric](https://www.datadoghq.com/blog/autoscale-kubernetes-datadog/)\n\n- [How to monitor Kubernetes + Docker with Datadog](https://www.datadoghq.com/blog/monitor-kubernetes-docker/)\n\n- [Monitoring in the Kubernetes era](https://www.datadoghq.com/blog/monitoring-kubernetes-era/)\n\n- [Monitoring Kubernetes performance metrics](https://www.datadoghq.com/blog/monitoring-kubernetes-performance-metrics/)\n\n- [Collecting metrics with built-in Kubernetes monitoring tools](https://www.datadoghq.com/blog/how-to-collect-and-graph-kubernetes-metrics/)\n\n- [Monitoring Kubernetes with Datadog](https://www.datadoghq.com/blog/monitoring-kubernetes-with-datadog/)\n\n- [Datadog's Kubernetes integration docs](https://docs.datadoghq.com/integrations/kubernetes/)\n\nClone this template dashboard to make changes and add your own graph widgets. (cloned)","widgets":[{"id":3418864353162908,"definition":{"title":"Kubernetes Overview","title_align":"center","background_color":"pink","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":3066517502121144,"definition":{"title":"Clusters","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"count_nonzero(query1)"}],"response_format":"scalar","queries":[{"query":"avg:kubernetes.pods.running{$scope,*,*,*,$deployment,$statefulset,*,$daemonset,$namespace,$cluster} by {kube_cluster_name}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"custom_links":[],"precision":0},"layout":{"x":0,"y":0,"width":1,"height":1}},{"id":5947551708574726,"definition":{"title":"Nodes","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"palette":"white_on_green","value":0,"comparator":">"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.node.count{$cluster}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"custom_unit":" ","precision":0},"layout":{"x":1,"y":0,"width":2,"height":1}},{"id":8893991322689490,"definition":{"title":"Nodes not ready","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"palette":"white_on_red","value":0,"comparator":">"},{"palette":"white_on_green","value":0,"comparator":"<="}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.nodes.by_condition{status:true,!condition:ready,$cluster}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"precision":0},"layout":{"x":3,"y":0,"width":2,"height":1}},{"id":5371109930503170,"definition":{"title":"Services","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.service.count{$scope,$label,$node,$service,$namespace,$cluster}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"custom_links":[],"precision":0},"layout":{"x":5,"y":0,"width":2,"height":1}},{"id":7545018725699604,"definition":{"title":"Pods","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"query":"sum:kubernetes.pods.running{$scope,$label,$node,$service,$deployment,$statefulset,$replicaset,$daemonset,$namespace,$cluster}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"custom_links":[{"link":"https://app.datadoghq.com/screen/integration/30322/kubernetes-pods-overview","label":"View Pods overview"}],"precision":0},"layout":{"x":7,"y":0,"width":2,"height":1}},{"id":2438609618224538,"definition":{"title":"Kubelets up","title_size":"16","title_align":"center","time":{"live_span":"10m"},"type":"check_status","check":"kubernetes.kubelet.check","grouping":"cluster","group_by":[],"tags":["$scope","$node","$label","$cluster"]},"layout":{"x":9,"y":0,"width":1,"height":1}},{"id":7658167911138410,"definition":{"title":"Nodes not in Ready condition","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.nodes.by_condition{status:true,!condition:ready,$scope,$cluster} by {status,condition,kube_cluster_name}","data_source":"metrics","name":"query1","aggregator":"last"}]}]},"layout":{"x":10,"y":0,"width":2,"height":2}},{"id":2537909163316112,"definition":{"title":"Namespaces","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"count_nonzero(query1)"}],"response_format":"scalar","queries":[{"query":"avg:kubernetes.pods.running{$scope,$label,$node,$service,$deployment,$statefulset,$replicaset,$daemonset,$namespace,$cluster} by {kube_cluster_name,kube_namespace}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"custom_links":[],"precision":0},"layout":{"x":0,"y":1,"width":1,"height":1}},{"id":821043230924304,"definition":{"title":"Deployments","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"count_nonzero(query1)"}],"response_format":"scalar","queries":[{"query":"avg:kubernetes_state.deployment.replicas{$scope,$label,$node,$service,$deployment,$replicaset,$namespace,$cluster} by {kube_cluster_name,kube_namespace,kube_deployment}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"custom_links":[],"precision":0},"layout":{"x":1,"y":1,"width":2,"height":1}},{"id":4368377375982288,"definition":{"title":"DaemonSets","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"count_nonzero(query1)"}],"response_format":"scalar","queries":[{"query":"avg:kubernetes_state.daemonset.desired{$scope,$label,$node,$service,$daemonset,$namespace,$cluster} by {kube_cluster_name,kube_namespace,kube_daemon_set}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"custom_links":[],"precision":0},"layout":{"x":3,"y":1,"width":2,"height":1}},{"id":792078519405350,"definition":{"title":"StateFulSets","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"count_nonzero(query1)"}],"response_format":"scalar","queries":[{"query":"avg:kubernetes_state.statefulset.replicas{$scope,$label,$node,$service,$statefulset,$replicaset,$namespace,$cluster} by {kube_cluster_name,kube_namespace,kube_stateful_set}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"custom_links":[],"precision":0},"layout":{"x":5,"y":1,"width":2,"height":1}},{"id":1211252422175304,"definition":{"title":"Containers","title_size":"16","title_align":"left","type":"query_value","requests":[{"response_format":"scalar","queries":[{"query":"sum:kubernetes.containers.running{$scope,$label,$node,$service,$deployment,$statefulset,$replicaset,$daemonset,$namespace,$cluster}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"custom_links":[],"precision":0},"layout":{"x":7,"y":1,"width":2,"height":1}},{"id":2776949061418690,"definition":{"title":"Kubelet Ping","title_size":"16","title_align":"center","time":{"live_span":"10m"},"type":"check_status","check":"kubernetes.kubelet.check.ping","grouping":"cluster","group_by":[],"tags":["$node","$label","$scope","$cluster"]},"layout":{"x":9,"y":1,"width":1,"height":1}},{"id":3627252626897862,"definition":{"title":"Kubernetes Events (Warning)","time":{"live_span":"1w"},"requests":[{"query":{"query_string":"source:kubernetes $node status:warn $cluster","data_source":"event_stream","event_size":"s"},"columns":[],"response_format":"event_list"}],"type":"list_stream"},"layout":{"x":0,"y":2,"width":4,"height":4}},{"id":5958506261105696,"definition":{"title":"CPU Usage","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"(query1 / query2) * 100"}],"conditional_formats":[{"palette":"white_on_green","value":80,"comparator":"<"},{"palette":"white_on_yellow","value":90,"comparator":"<"},{"palette":"white_on_red","value":90,"comparator":">"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.cpu.requests{$cluster,$scope}","data_source":"metrics","name":"query1","aggregator":"last"},{"query":"sum:kubernetes_state.node.cpu_allocatable{$cluster,$scope}","data_source":"metrics","name":"query2","aggregator":"last"}]}],"autoscale":false,"custom_unit":"%","precision":2},"layout":{"x":4,"y":2,"width":1,"height":2}},{"id":306378348216892,"definition":{"title":"Cluster CPU Capacity  ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"allocatable","formula":"query4"},{"alias":"requests","formula":"query5"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes_state.node.cpu_allocatable{$cluster,$scope}","data_source":"metrics","name":"query4"},{"query":"sum:kubernetes.cpu.requests{$cluster,$scope}","data_source":"metrics","name":"query5"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":5,"y":2,"width":3,"height":2}},{"id":7004262876271468,"definition":{"title":"Memory Usage","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"(query1 / query2) * 100"}],"conditional_formats":[{"palette":"white_on_green","value":80,"comparator":"<"},{"palette":"white_on_red","value":90,"comparator":">"},{"palette":"white_on_yellow","value":90,"comparator":"<"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.memory.requests{$cluster,$scope}","data_source":"metrics","name":"query1","aggregator":"last"},{"query":"sum:kubernetes_state.node.memory_allocatable{$cluster,$scope}","data_source":"metrics","name":"query2","aggregator":"last"}]}],"autoscale":false,"custom_unit":"%","precision":2},"layout":{"x":8,"y":2,"width":1,"height":2}},{"id":8830761853245304,"definition":{"title":"Cluster Memory Capacity ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"allocatable","formula":"query6"},{"alias":"requests","formula":"query4"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes_state.node.memory_allocatable{$cluster,$scope}","data_source":"metrics","name":"query6"},{"query":"sum:kubernetes.memory.requests{$cluster,$scope}","data_source":"metrics","name":"query4"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":9,"y":2,"width":3,"height":2}},{"id":2847734896404596,"definition":{"title":"Pod Utilization","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"(query1 / query2) * 100"}],"conditional_formats":[{"palette":"white_on_green","value":80,"comparator":"<"},{"palette":"white_on_yellow","value":90,"comparator":"<"},{"palette":"white_on_red","value":90,"comparator":">"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.pods.running{$cluster,$scope}","data_source":"metrics","name":"query1","aggregator":"last"},{"query":"sum:kubernetes_state.node.pods_capacity{$cluster,$scope}","data_source":"metrics","name":"query2","aggregator":"last"}]}],"custom_unit":"%","precision":2},"layout":{"x":4,"y":4,"width":1,"height":2}},{"id":4155214042535724,"definition":{"title":"Cluster Pod Utilization","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"allocatable","formula":"query2"},{"alias":"running","formula":"query3"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes_state.node.pods_allocatable{$cluster,$scope}","data_source":"metrics","name":"query2"},{"query":"sum:kubernetes.pods.running{$cluster,$scope}","data_source":"metrics","name":"query3"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":5,"y":4,"width":3,"height":2}},{"id":8051532099642430,"definition":{"title":"Cluster Disk Utilization ","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1 * 100"}],"conditional_formats":[{"palette":"white_on_green","value":80,"comparator":"<"},{"palette":"white_on_yellow","value":90,"comparator":"<"},{"palette":"white_on_red","value":90,"comparator":">"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.filesystem.usage_pct{$scope,$cluster} by {kube_cluster_name}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"custom_unit":"%","precision":2},"layout":{"x":8,"y":4,"width":1,"height":2}},{"id":5018922470452314,"definition":{"title":"Cluster Disk Utilization ","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"horizontal","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"usage"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.filesystem.usage{$scope,$cluster}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":9,"y":4,"width":3,"height":2}}]},"layout":{"x":0,"y":0,"width":12,"height":7}},{"id":2155030059397962,"definition":{"title":"Deployments & Daemonsets","title_align":"center","background_color":"orange","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":2095804067811330,"definition":{"title":"Deployments","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"count_nonzero(query1)"}],"conditional_formats":[{"palette":"white_on_green","value":0,"comparator":">"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.deployment.replicas{$scope,$cluster,$namespace} by {kube_deployment}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"autoscale":true,"precision":0},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":5373410437258744,"definition":{"title":"Replicas","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"value":0,"palette":"green_on_white","comparator":">","custom_fg_color":"#6a53a1"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.deployment.replicas{$scope,*,*,*,$cluster,$namespace}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"custom_links":[],"precision":0},"layout":{"x":2,"y":0,"width":2,"height":2}},{"id":1333384052920234,"definition":{"title":"Replica Outdated","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1 - query2"}],"conditional_formats":[{"palette":"yellow_on_white","value":0,"comparator":">="}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.deployment.replicas{$scope,*,*,*,$cluster,$namespace}","data_source":"metrics","name":"query1","aggregator":"last"},{"query":"sum:kubernetes_state.deployment.replicas_updated{$scope,*,*,*,$cluster,$namespace}","data_source":"metrics","name":"query2","aggregator":"last"}]}],"autoscale":true,"custom_links":[],"precision":0},"layout":{"x":4,"y":0,"width":2,"height":2}},{"id":6907772216368276,"definition":{"title":"Replica Desired","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"value":0,"palette":"custom_text","comparator":">","custom_fg_color":"#6a54a1"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.deployment.replicas_desired{$scope,$cluster,$namespace}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":6,"y":0,"width":2,"height":2}},{"id":5313347640424582,"definition":{"title":"Pods desired","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Pods Desired","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes_state.deployment.replicas_desired{$scope,$cluster,$namespace} by {kube_deployment}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":4461374530272518,"definition":{"title":"Unavailable","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"palette":"white_on_red","value":0,"comparator":">"},{"palette":"white_on_green","value":0,"comparator":"<="}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.deployment.replicas_unavailable{$scope,*,*,*,$cluster,$namespace}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"custom_links":[],"precision":0},"layout":{"x":0,"y":2,"width":2,"height":2}},{"id":5682156122595242,"definition":{"title":"Pods unavailable","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Pods Unavailable","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes_state.deployment.replicas_unavailable{$scope,$cluster,$namespace} by {kube_deployment}","data_source":"metrics","name":"query1"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":2,"width":4,"height":2}},{"id":986554050614752,"definition":{"title":"Replica Available","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"palette":"green_on_white","value":0,"comparator":">"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.deployment.replicas_available{$scope,*,*,*,$cluster,$namespace}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"custom_links":[],"precision":0},"layout":{"x":6,"y":2,"width":2,"height":2}},{"id":4160606983015132,"definition":{"title":"Replicas available","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Replicas Available","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes_state.deployment.replicas_available{$scope,$cluster,$namespace} by {kube_deployment}","data_source":"metrics","name":"query1"}],"style":{"palette":"green","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":449058002432068,"definition":{"title":"DaemonSets","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"count_nonzero(query1)"}],"conditional_formats":[{"palette":"white_on_green","value":0,"comparator":">"}],"response_format":"scalar","queries":[{"query":"avg:kubernetes_state.daemonset.desired{$scope,$cluster} by {kube_cluster_name,kube_namespace,kube_daemon_set}","data_source":"metrics","name":"query1","aggregator":"avg"}]}],"precision":0},"layout":{"x":0,"y":4,"width":2,"height":2}},{"id":8794948351165264,"definition":{"title":"Desired","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"value":0,"palette":"custom_text","comparator":">","custom_fg_color":"#6a53a1"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.daemonset.desired{$cluster,$scope}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":2,"y":4,"width":2,"height":2}},{"id":7450879343114418,"definition":{"title":"Replicas desired","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Replicas Desired","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes_state.daemonset.desired{$cluster,$scope} by {kube_daemon_set}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":4,"width":3,"height":2}},{"id":8068128137471016,"definition":{"title":"Ready","title_size":"16","title_align":"left","type":"query_value","requests":[{"conditional_formats":[{"palette":"green_on_white","value":0,"comparator":">"},{"palette":"red_on_white","value":0,"comparator":"<="}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.daemonset.ready{$cluster,$scope}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":7,"y":4,"width":2,"height":2}},{"id":7567174030648426,"definition":{"title":"Replicas Ready","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"Replicas ready"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes_state.daemonset.ready{$scope,$cluster} by {kube_daemon_set}","data_source":"metrics","name":"query1"}],"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":9,"y":4,"width":3,"height":2}}]},"layout":{"x":0,"y":7,"width":12,"height":7}},{"id":8933567865449096,"definition":{"title":"Pods & Replicasets","title_align":"center","background_color":"yellow","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":6891432778307160,"definition":{"title":"CPU-intensive pods","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":5,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.cpu.usage.total{$scope,$namespace,$deployment,!pod_name:no_pod,$cluster,$statefulset,$daemonset,$service} by {pod_name}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":1565688625897228,"definition":{"title":"CPU Usage by Pod","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"CPU Usage"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes.cpu.usage.total{$cluster,$namespace,$deployment,$scope,$statefulset,$daemonset,$service} by {pod_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":2,"y":0,"width":4,"height":2}},{"id":8613566619352784,"definition":{"title":"Memory-intensive pods","title_size":"16","title_align":"left","time":{"live_span":"4h"},"type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":5,"order":"desc"}}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.memory.usage{$scope,$namespace,$deployment,!pod_name:no_pod,$cluster,$statefulset,$daemonset,$service} by {pod_name}","data_source":"metrics","name":"query1","aggregator":"avg"}]}]},"layout":{"x":6,"y":0,"width":2,"height":2}},{"id":6589391191734594,"definition":{"title":"Memory Usage by Pod","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"vertical","legend_columns":["avg","max","value"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"Memory Usage"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes.memory.usage{$cluster,$namespace,$deployment,$scope,$statefulset,$daemonset,$service} by {pod_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"cool","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":6161160205724504,"definition":{"title":"Pods Running By Namespace","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":100,"order":"desc"}}],"conditional_formats":[{"palette":"white_on_red","value":2000,"comparator":">"},{"palette":"white_on_yellow","value":1500,"comparator":">"},{"palette":"white_on_green","value":3000,"comparator":"<="}],"response_format":"scalar","queries":[{"query":"sum:kubernetes.pods.running{$scope,$namespace,$deployment,$cluster,$statefulset,$daemonset,$service} by {kubernetes_cluster,kube_namespace}","data_source":"metrics","name":"query1","aggregator":"max"}]}],"custom_links":[]},"layout":{"x":0,"y":2,"width":2,"height":2}},{"id":8704870376063862,"definition":{"title":"Pods in Ready State By Node","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"conditional_formats":[{"palette":"white_on_green","value":24,"comparator":"<="},{"palette":"white_on_red","value":32,"comparator":">"},{"palette":"white_on_yellow","value":24,"comparator":">"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.pod.ready{$scope,$cluster,$namespace,$deployment,condition:true,$statefulset,$daemonset,$service} by {kubernetes_cluster,nodepool,nodegroup-role,host}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"custom_links":[]},"layout":{"x":2,"y":2,"width":2,"height":2}},{"id":1207808075045600,"definition":{"title":"Pods in bad phase by namespaces","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"query1","limit":{"count":100,"order":"desc"}}],"conditional_formats":[{"palette":"white_on_red","value":0,"comparator":">"},{"palette":"white_on_green","value":0,"comparator":"<="}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.pod.status_phase{$scope,$cluster,$namespace,$deployment,$statefulset,$replicaset,$daemonset,!pod_phase:running,!pod_phase:succeeded,$label,$node,$service} by {kube_cluster_name,kube_namespace,pod_phase}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"custom_links":[]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":3105225906486612,"definition":{"title":"CrashloopBackOff by Pod","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"sum:kubernetes_state.container.waiting{$cluster,$namespace,$deployment,$statefulset,$replicaset,$daemonset,reason:crashloopbackoff,$scope,$daemonset,$label,$node,$service} by {pod_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[{"label":"y = 0","value":"y = 0","display_type":"ok dashed"}],"custom_links":[]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":3848732272463314,"definition":{"title":"Pods in Bad State (Not Ready) by Namespace","title_size":"16","title_align":"left","type":"toplist","requests":[{"formulas":[{"formula":"exclude_null(query1)","limit":{"count":500,"order":"desc"}}],"conditional_formats":[{"palette":"white_on_red","value":0,"comparator":">"},{"palette":"white_on_green","value":0,"comparator":"<="}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.pod.ready{condition:false,$scope,$cluster,$namespace,$deployment,$statefulset,$daemonset,$service,!pod_phase:succeeded} by {kube_namespace}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"custom_links":[]},"layout":{"x":0,"y":4,"width":2,"height":2}},{"id":7763909347509300,"definition":{"title":"Replicas Not Ready","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1 - query2"}],"conditional_formats":[{"value":0,"palette":"custom_text","comparator":">","custom_fg_color":"#e5a227"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.replicaset.replicas_desired{$scope,$cluster}","data_source":"metrics","name":"query1","aggregator":"last"},{"query":"sum:kubernetes_state.replicaset.replicas_ready{$scope,$cluster}","data_source":"metrics","name":"query2","aggregator":"last"}]}],"autoscale":true,"precision":0},"layout":{"x":2,"y":4,"width":2,"height":2}},{"id":1178798571930162,"definition":{"title":"Replicas Not Ready","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"formula":"query1 - query2","alias":"Replicas not ready"}],"response_format":"timeseries","on_right_yaxis":false,"queries":[{"query":"sum:kubernetes_state.replicaset.replicas_desired{$scope,$cluster} by {kube_cluster_name,kube_namespace,kube_replica_set}","data_source":"metrics","name":"query1"},{"query":"sum:kubernetes_state.replicaset.replicas_ready{$scope,$cluster} by {kube_cluster_name,kube_namespace,kube_replica_set}","data_source":"metrics","name":"query2"}],"style":{"palette":"orange","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":2910755804388072,"definition":{"title":"Replicas Changes","title_size":"16","title_align":"left","type":"change","requests":[{"formulas":[{"formula":"hour_before(query1)"},{"formula":"query1"}],"order_by":"change","order_dir":"desc","response_format":"scalar","increase_good":true,"queries":[{"query":"avg:kubernetes_state.replicaset.replicas{$scope,$cluster,$namespace,$deployment,$daemonset,$statefulset} by {kube_cluster_name,kube_namespace,kube_replica_set}","data_source":"metrics","name":"query1","aggregator":"avg"}],"change_type":"absolute"}]},"layout":{"x":8,"y":4,"width":4,"height":2}}]},"layout":{"x":0,"y":14,"width":12,"height":7,"is_column_break":true}},{"id":7709607487010546,"definition":{"title":"Services & Disk I/O & Network","title_align":"left","background_color":"green","show_title":true,"type":"group","layout_type":"ordered","widgets":[{"id":4761972724816032,"definition":{"title":"Services","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"palette":"white_on_green","value":0,"comparator":">"}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.service.count{$scope,$cluster,$namespace} by {kube_cluster_name}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"precision":0},"layout":{"x":0,"y":0,"width":2,"height":2}},{"id":8529451391332124,"definition":{"title":"Endpoint NotReady","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"conditional_formats":[{"palette":"white_on_red","value":0,"comparator":">"},{"palette":"white_on_green","value":0,"comparator":"<="}],"response_format":"scalar","queries":[{"query":"sum:kubernetes_state.endpoint.address_not_ready{$scope,$cluster,$namespace} by {kube_cluster_name,kube_namespace}","data_source":"metrics","name":"query1","aggregator":"last"}]}],"precision":0},"layout":{"x":2,"y":0,"width":2,"height":2}},{"id":1335753593321690,"definition":{"title":"Service types per cluster,namespace","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"service type per cluster","formula":"query1"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes_state.service.count{$scope,$cluster,$namespace} by {type,kube_cluster_name,kube_namespace}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":0,"width":4,"height":2}},{"id":8822165990751134,"definition":{"title":"# Pods running by Service","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"# of pods","formula":"exclude_null(query1)"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.pods.running{$cluster,$scope,$namespace} by {kube_service,kube_cluster_name,kube_namespace}","data_source":"metrics","name":"query1"}],"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":8,"y":0,"width":4,"height":2}},{"id":4224821469434712,"definition":{"title":"Disk writes per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"alias":"network writes per node","formula":"query1 - query2"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.io.write_bytes{$scope,$cluster} by {kube_replica_set,host}","data_source":"metrics","name":"query1"},{"query":"avg:kubernetes_state.replicaset.replicas_ready{$scope,$cluster} by {host}","data_source":"metrics","name":"query2"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":2,"width":4,"height":2}},{"id":4269741565541984,"definition":{"title":"Network in per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"network in per node"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.network.rx_bytes{$scope,$cluster} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"purple"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":2,"width":4,"height":2}},{"id":6951879448639410,"definition":{"title":"Network errors per pod","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"sum:kubernetes.network.rx_errors{$scope,$cluster} by {pod_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"response_format":"timeseries","queries":[{"query":"sum:kubernetes.network.tx_errors{$scope,$cluster} by {pod_name}","data_source":"metrics","name":"query1"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"custom_links":[]},"layout":{"x":8,"y":2,"width":4,"height":2}},{"id":1323990439290818,"definition":{"title":"Disk reads per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1 - query2","alias":"disk reads per node "}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.io.read_bytes{$scope,$cluster} by {kube_replica_set,host}","data_source":"metrics","name":"query1"},{"query":"avg:kubernetes_state.replicaset.replicas_ready{$scope,$cluster} by {host}","data_source":"metrics","name":"query2"}],"style":{"palette":"grey","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":0,"y":4,"width":4,"height":2}},{"id":4510195316932622,"definition":{"title":"Network out per node","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"time":{"live_span":"4h"},"type":"timeseries","requests":[{"formulas":[{"formula":"query1","alias":"network out per node"}],"response_format":"timeseries","queries":[{"query":"sum:kubernetes.network.tx_bytes{$scope,$cluster} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"green"},"display_type":"line"}],"yaxis":{"include_zero":true,"scale":"linear","label":"","min":"auto","max":"auto"},"markers":[]},"layout":{"x":4,"y":4,"width":4,"height":2}},{"id":2749752296223092,"definition":{"title":"Network errors per node","title_size":"16","title_align":"left","show_legend":false,"legend_size":"0","time":{"live_span":"4h"},"type":"timeseries","requests":[{"response_format":"timeseries","queries":[{"query":"sum:kubernetes.network.rx_errors{$scope,$cluster} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"warm"},"display_type":"bars"},{"response_format":"timeseries","queries":[{"query":"sum:kubernetes.network.tx_errors{$scope,$cluster} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"warm"},"display_type":"bars"},{"response_format":"timeseries","queries":[{"query":"sum:kubernetes.network_errors{$scope,$cluster} by {host}","data_source":"metrics","name":"query1"}],"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"custom_links":[]},"layout":{"x":8,"y":4,"width":4,"height":2}}]},"layout":{"x":0,"y":21,"width":12,"height":7}}],"template_variables":[{"name":"scope","available_values":[],"default":"*"},{"name":"cluster","prefix":"kube_cluster_name","available_values":[],"default":"*"},{"name":"namespace","prefix":"kube_namespace","available_values":[],"default":"*"},{"name":"deployment","prefix":"kube_deployment","available_values":[],"default":"*"},{"name":"daemonset","prefix":"kube_daemon_set","available_values":[],"default":"*"},{"name":"statefulset","prefix":"kube_stateful_set","available_values":[],"default":"*"},{"name":"replicaset","prefix":"kube_replica_set","available_values":[],"default":"*"},{"name":"service","prefix":"kube_service","available_values":[],"default":"*"},{"name":"node","prefix":"node","available_values":[],"default":"*"},{"name":"label","prefix":"label","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed","tags":[]}